; -----------------------------------------------------------------------------
; Snow
; -----------------------------------------------------------------------------

Weather
  SnowEnabled = yes ; enable/disable snow on the map.
  SnowTexture = ExSnowFlake1.tga ;texture used for each snow particle.
  SnowBoxDimensions = 300 ; width/height of box around camera containing snow.
  SnowBoxDensity = 1 ; amount of snow particles per world-unit. Raise to increase particle count.
  SnowFrequencyScaleX = 0.0533 ;speed of side-to-side wave movement.
  SnowFrequencyScaleY = 0.0275 ;speed of side-to-side wave movement.
  SnowAmplitude = 2.0 ;amount of side-to-side movement.
  SnowVelocity = 1.0 ;speed at which snow falls
  SnowPointSize = .16 ;scale the size of snow particles.
  SnowMaxPointSize = 10.0 ; maximum pixel size of point sprite particles (min-spec requires <= 64).
  SnowMinPointSize = 0.0 ; minimum pixel size of point sprite particles.

  ;Some video cards can't do hardware accelerated particles.  Set this
  ;setting to "no" in order see what emulation will look like.  Use the
  ;SnowQuadSize setting to make it look similar to PointSprite version.

  SnowPointSprites = yes ;set to "no" for point-sprite emulation.
  SnowQuadSize = 0.5 ;scale the size of snow particles when using point-sprite emulation.
End

; -----------------------------------------------------------------------------
; Water
; -----------------------------------------------------------------------------

WaterTransparency
  TransparentWaterMinOpacity = 1.0 ; opacity of water at maximum depth - 1.0 is opaque, 0 transparent.
  TransparentWaterDepth = 3.0 ; depth below water surface at which it becomes opaque (unless clipped by TransparentWaterMinOpacity)
  StandingWaterColor = R:85 G:85 B:85 ; material color used to tint the water surface.
  StandingWaterTexture = TWWater01.tga ; main texture used for water (usually something blue that looks like water).
  AdditiveBlending = no ; use additive blending instead of alpha blending?
  RadarWaterColor = R:140 G:140 B:255 ; color of water on radar display.

; -----------------------------------------------------------------------------
; Skybox
; -----------------------------------------------------------------------------

  SkyboxTextureN = cine_biakclouds.tga
  SkyboxTextureE = cine_biakclouds.tga
  SkyboxTextureS = cine_biakclouds.tga
  SkyboxTextureW = cine_biakclouds.tga
  SkyboxTextureT = cine_biakclouds.tga

End

; -----------------------------------------------------------------------------
; Waterfalls
;
; From: https://www.youtube.com/watch?v=ACbklVPfYRk
; Author: AGX750
; -----------------------------------------------------------------------------

Object ParticleTestObject
 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override
    ConditionState = NONE ;100%
      Model = NONE
      ParticleSysBone = WaterSpray01 WaterSpray
      ParticleSysBone = WaterSpray02 WaterSpray
      ParticleSysBone = WaterSpray03 WaterSpray
    End
    ConditionState = DAMAGED ;50%
      Model = NONE
      ParticleSysBone = Spray04 DamOverflow
      ParticleSysBone = Spray07 DamOverflow
      ParticleSysBone = Spray08 DamOverflow
      ParticleSysBone = WaterSpray01 WaterSpraySplash
      ParticleSysBone = WaterSpray02 WaterSpraySplash
      ParticleSysBone = WaterSpray03 WaterSpraySplash
    End
    ConditionState = REALLYDAMAGED ;25%
      Model = NONE
      ParticleSysBone = WATERSPOUT DrainPipeWater1
    End
    ConditionState = RUBBLE ;Dead
      Model = NONE
      ParticleSysBone = WaterSpray01 DamMist
    End
  End
 End

  ; *** ENGINEERING Parameters ***
  KindOf = IMMOBILE

 ReplaceModule ModuleTag_02
  Body = ActiveBody ModuleTag_02_Override
    MaxHealth = 99999999.0
    InitialHealth = 99999999.0
  End
 End
  ArmorSet
    Conditions = None
    Armor = InvulnerableArmor
    DamageFX = EmptyDamageFX
  End
  RemoveModule ModuleTag_03

  ; *** AUDIO Parameters ***
  SoundAmbient = DamDamageLoop3
  SoundAmbientDamaged = Amb_WaterRiverLoop
  SoundAmbientReallyDamaged = Amb_WaterStreamLoop
  SoundAmbientRubble = DamDamageLoop2
End

; -----------------------------------------------------------------------------
; Audio fixes
; -----------------------------------------------------------------------------

; vsupspe does not exist
AudioEvent SupplyTruckVoiceSupply
  Sounds = vsupspa vsupspb vsupspc vsupspd
  Control = random
  Volume = 90
  Type = ui voice player
End

; -----------------------------------------------------------------------------
; Chinooks show Supply Lines upgrade
;
; Supply Centers continue to show the upgrade as well. It provides easily
; accessible upgrade information to both players and removing it provides no
; benefit.
; -----------------------------------------------------------------------------

Object AmericaVehicleChinook
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

Object AFG_AmericaVehicleChinook
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

Object AirF_AmericaVehicleChinook
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

Object Lazr_AmericaVehicleChinook
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

Object SupW_AmericaVehicleChinook
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; -----------------------------------------------------------------------------
; Hospital auto repair
; -----------------------------------------------------------------------------
Object TechHospital
  AddModule
    Behavior = BaseRegenerateUpdate ModuleTag_11
    End
  End
End

; -----------------------------------------------------------------------------
; Oil Derricks show Supply Lines upgrade
; Oil Derricks auto repair
; -----------------------------------------------------------------------------

Object TechOilDerrick
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  AddModule
    Behavior = BaseRegenerateUpdate ModuleTag_11
    End
  End
End

; -----------------------------------------------------------------------------
; Oil Refinery auto repair
; -----------------------------------------------------------------------------
Object TechOilRefinery
  AddModule
    Behavior = BaseRegenerateUpdate ModuleTag_11
    End
  End
End

; -----------------------------------------------------------------------------
; Fix Technical
; -----------------------------------------------------------------------------

; Fully scrapped Technicals now benefit from AP Rockets if not already benefiting from AP Bullets
Object TechnicalRPGMissile
  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_08
      TriggeredBy = Upgrade_GLAAPRockets
    End
  End
End

; -----------------------------------------------------------------------------
; Fix Combat Cycle
; -----------------------------------------------------------------------------

MappedImage SNNukeBtleMstr_L
  Texture = SUUserInterface512_001.tga
  TextureWidth = 512
  TextureHeight = 512
  Coords = Left:1 Top:393 Right:121 Bottom:489
  Status = NONE
End

Object GLAVehicleCombatBike
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLACamouflage
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  UpgradeCameo5 = NONE

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

Object GLAVehicleCombatBikeRocket
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLACamouflage
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  UpgradeCameo5 = NONE

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

Object GLAVehicleCombatBikeTerrorist
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLACamouflage
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  UpgradeCameo5 = NONE

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

Object Chem_GLAVehicleCombatBike
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

Object Slth_GLAVehicleCombatBike
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLACamouflage
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  UpgradeCameo5 = NONE

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

Object Boss_VehicleCombatBikeTerrorist
  SelectPortrait = SNNukeBtleMstr_L

  ; Add AP Bullets
  ; Was missing AP Rockets which this unit already benefited from
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Demo_Upgrade_SuicideBomb
  UpgradeCameo5 = NONE

  RemoveModule ModuleTag_01
  AddModule
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone = PRIMARY Muzzle_B
      WeaponLaunchBone = PRIMARY RocketFX03
      WeaponMuzzleFlash = PRIMARY MuzzleFX_B
      ParticleSysBone = SMOKE CombatBikeSmokeLight

      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)
    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED

    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation = UVComBike_F.UVComBike_F
      AnimationMode = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation = UVComBike_DF.UVComBike_DF
      AnimationMode = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation = UVComBike_A1.UVComBike_A1
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation = UVComBike_A1D.UVComBike_A1D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation = UVComBike_A1.UVComBike_A1
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation = UVComBike_A1D.UVComBike_A1D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation = UVComBike_A2.UVComBike_A2
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation = UVComBike_A2D.UVComBike_A2D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation = UVComBike_A2.UVComBike_A2
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation = UVComBike_A2D.UVComBike_A2D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ConditionState RIDER5
      Model = UVComBike
      WeaponFireFXBone = PRIMARY Muzzle_B
      WeaponLaunchBone = PRIMARY RocketFX03
      WeaponMuzzleFlash = PRIMARY MuzzleFX_B
      ParticleSysBone = SMOKE CombatBikeSmokeLight
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING

    ConditionState = REALLYDAMAGED RIDER5
      Model = UVComBike_d
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING REALLYDAMAGED

    ConditionState = TOPPLED RIDER5
      Model = UVComBike_F
      Animation = UVComBike_F.UVComBike_F
      AnimationMode = ONCE
      ShowSubObject = BOMBBIKE
    End
    ConditionState = TOPPLED REALLYDAMAGED RIDER5
      Model = UVComBike_dF
      Animation = UVComBike_DF.UVComBike_DF
      AnimationMode = ONCE
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation = UVComBike_A1.UVComBike_A1
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation = UVComBike_A1D.UVComBike_A1D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation = UVComBike_A1.UVComBike_A1
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation = UVComBike_A1D.UVComBike_A1D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation = UVComBike_A2.UVComBike_A2
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation = UVComBike_A2D.UVComBike_A2D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation = UVComBike_A2.UVComBike_A2
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation = UVComBike_A2D.UVComBike_A2D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED

    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN_A1
      Animation = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN_A1
      Animation = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN_A2
      Animation = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode = ONCE
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN_A2
      Animation = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode = ONCE_BACKWARDS
      ParticleSysBone = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust = CombatBikeDust
    DirtSpray = CombatBikeDirtSpray
    PowerslideSpray = CombatBikeDirtPowerSlide

    LeftFrontTireBone = Tire01
    LeftRearTireBone = Tire00
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End
  End

  RemoveModule ModuleTag_Rider01
  AddModule
  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UIWrkr_SKN
      WeaponMuzzleFlash = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ConditionState = RIDER1
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER2
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER3
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER4
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER5
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITer_Local_SKN
      Animation = UITer_Local_SKL.UITER_Local_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER6
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = RIDER7
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerMachineGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY DEMO_TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon
  End

  Prerequisites
    Object = Demo_GLAArmsDealer
  End

  CommandSet = Demo_GLAVehicleCombatBikeDefaultCommandSet

  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
  UnitSpecificSounds
    VoiceCreate = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  RemoveModule DeathTag_04
  AddModule
    Behavior = SlowDeathBehavior DeathTag_04
      ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End
  RemoveModule DeathTag_06
  AddModule
    Behavior = SlowDeathBehavior DeathTag_06
      RequiredStatus = STATUS_RIDER2
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End
  RemoveModule DeathTag_07
  AddModule
    Behavior = SlowDeathBehavior DeathTag_07
      RequiredStatus = STATUS_RIDER3
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End
  RemoveModule DeathTag_08
  AddModule
    Behavior = SlowDeathBehavior DeathTag_08
      RequiredStatus = STATUS_RIDER4
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End
  RemoveModule DeathTag_09
  AddModule
    Behavior = SlowDeathBehavior DeathTag_09
      RequiredStatus = STATUS_RIDER5
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End
  RemoveModule DeathTag_10
  AddModule
    Behavior = SlowDeathBehavior DeathTag_10
      RequiredStatus = STATUS_RIDER6
      DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
      DestructionDelay = 0
      FX = INITIAL FX_DEMOBuggyNewDeathExplosion
      OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
      OCL = FINAL OCL_CombatBikeAirDeathStart
    End
  End

  RemoveModule ModuleTag_16
  AddModule
    Behavior = RiderChangeContain ModuleTag_16
      Rider1 = Demo_GLAInfantryWorker RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
      Rider2 = Demo_GLAInfantryRebel RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
      Rider3 = Demo_GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
      Rider4 = Demo_GLAInfantryJarmenKell RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
      Rider5 = Demo_GLAInfantryTerrorist RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
      Rider6 = Demo_GLAInfantryHijacker RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
      Rider7 = Demo_GLAInfantrySaboteur RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
      ScuttleDelay = 1500
      ScuttleStatus = TOPPLED
      Slots = 1
      InitialPayload = Demo_GLAInfantryTerrorist 1
      ScatterNearbyOnExit = No
      HealthRegen%PerSec = 0
      DamagePercentToUnits = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
      BurnedDeathToUnits = No    ; And no Burned death.
      AllowInsideKindOf = INFANTRY
      ExitDelay = 250
      NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
      GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    End
  End

  RemoveModule ModuleTag_Death18
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
      RequiredStatus = STATUS_RIDER5
      DeathWeapon = SuicideBikeBomb
      StartsActive = Yes
      DeathTypes = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
      ConflictsWith = Demo_Upgrade_SuicideBomb
    End
  End

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_20
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End

  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag999
      ExemptStatus = STATUS_RIDER5
      DeathWeapon = Demo_SuicideDynamitePackPlusFire
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      RequiresAllTriggers = Yes
      DeathTypes = ALL -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
    End
  End
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag998
      ExemptStatus = STATUS_RIDER5
      DeathWeapon = Demo_SuicideDynamitePack
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      RequiresAllTriggers = Yes
      DeathTypes = NONE +SUICIDED
    End
  End
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag997
      RequiredStatus = STATUS_RIDER5
      DeathWeapon = Demo_TerroristOnCombatBikeSuicideDynamitePackPlusFire
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      RequiresAllTriggers = Yes
      DeathTypes = ALL -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
    End
  End
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag996
      RequiredStatus = STATUS_RIDER5
      DeathWeapon = Demo_TerroristOnCombatBikeSuicideDynamitePack
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      RequiresAllTriggers = Yes
      DeathTypes = NONE +SUICIDED +POISONED +POISONED_BETA
    End
  End

  AddModule
    Behavior = CommandSetUpgrade ModuleTag_23
      CommandSet = Demo_GLAVehicleCombatBikeDefaultCommandSetUpgrade
      TriggeredBy = Demo_Upgrade_SuicideBomb
    End
  End
End

CommandButton Boss_Command_ConstructGLAVehicleCombatBikeTerrorist
  Command = UNIT_BUILD
  Object = Boss_VehicleCombatBikeTerrorist
  TextLabel = CONTROLBAR:ConstructGLAVehicleCombatBike
  ButtonImage = SUComBike
  ButtonBorderType = BUILD
  DescriptLabel = CONTROLBAR:ToolTipGLABuildCombatBikeTerrorist
End

CommandSet New_Demo_GLAArmsDealerCommandSet
  1 = Demo_Command_ConsturctGLATankScorpion
  2 = Demo_Command_ConstructGLAVehicleTechnical
  3 = Demo_Command_ConstructGLAVehicleRadarVan
  4 = Demo_Command_ConstructGLAVehicleQuadCannon
  5 = Demo_Command_ConstructGLAVehicleToxinTruck
  6 = Demo_Command_ConstructGLAVehicleRocketBuggy
  7 = Demo_Command_ConstructGLATankMarauder
  8 = Demo_Command_ConstructGLAVehicleBombTruck
  9 = Demo_Command_ConstructGLAVehicleScudLauncher
  10 = Command_UpgradeGLAScorpionRocket
  11 = Boss_Command_ConstructGLAVehicleCombatBikeTerrorist
  12 = Demo_Command_ConstructGLAVehicleBattleBus
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Demo_GLAArmsDealer
  CommandSet = New_Demo_GLAArmsDealerCommandSet
End

PlayerTemplate FactionAmerica
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionChina
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionGLA
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionAmericaSuperWeaponGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionAmericaLaserGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionAmericaAirForceGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionChinaTankGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionChinaInfantryGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionChinaNukeGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionGLAToxinGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionGLADemolitionGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

PlayerTemplate FactionGLAStealthGeneral
  ProductionCostChange = Boss_VehicleCombatBikeTerrorist 10%
  ProductionTimeChange = Boss_VehicleCombatBikeTerrorist -37.5%
End

; -----------------------------------------------------------------------------
; Fix USA Supply Center drop off with Supply Trucks and Workers
; -----------------------------------------------------------------------------

Object AmericaSupplyCenter
  RemoveModule ModuleTag_13
  AddModule
    Behavior = SupplyCenterDockUpdate ModuleTag_13
      AllowsPassthrough = No
      NumberApproachPositions = 9
    End
  End
End

Object SupW_AmericaSupplyCenter
  RemoveModule ModuleTag_13
  AddModule
    Behavior = SupplyCenterDockUpdate ModuleTag_13
      AllowsPassthrough = No
      NumberApproachPositions = 9
    End
  End
End

Object Lazr_AmericaSupplyCenter
  RemoveModule ModuleTag_13
  AddModule
    Behavior = SupplyCenterDockUpdate ModuleTag_13
      AllowsPassthrough = No
      NumberApproachPositions = 9
    End
  End
End

Object AirF_AmericaSupplyCenter
  RemoveModule ModuleTag_13
  AddModule
    Behavior = SupplyCenterDockUpdate ModuleTag_13
      AllowsPassthrough = No
      NumberApproachPositions = 9
    End
  End
End

; -----------------------------------------------------------------------------
; Supply Lines compatible Supply Trucks
; -----------------------------------------------------------------------------

; Skip vsupsda which references China
AudioEvent New_SupplyTruckVoiceSuppliesDepleted
  Sounds = vsupsdb vsupsdc vsupsdd
  Control = random
  Volume = 120
  MinVolume = 110
  Priority = high
  Type = world global player
End

Object Boss_VehicleSupplyTruck
  UpgradeCameo1 = Upgrade_AmericaSupplyLines
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  Prerequisites
    Object = AmericaSupplyCenter SupW_AmericaSupplyCenter Lazr_AmericaSupplyCenter AirF_AmericaSupplyCenter
  End

  RemoveModule ModuleTag_03
  AddModule
    Behavior = ChinookAIUpdate ModuleTag_03
      MaxBoxes = 4
      UpgradedSupplyBoost = 30
      SupplyCenterActionDelay = 400
      SupplyWarehouseActionDelay = 1000
      SupplyWarehouseScanDistance = 700
      SuppliesDepletedVoice = New_SupplyTruckVoiceSuppliesDepleted
    End
  End
  Locomotor = SET_NORMAL SupplyTruckLocomotor

  AddModule
    Behavior = TransportContain ModuleTag_09
    End
  End
End

; -----------------------------------------------------------------------------
; Supplies
; -----------------------------------------------------------------------------

Object ToxinRepository
  DisplayName = OBJECT:SupplyDock

  KindOf = STRUCTURE IMMOBILE SELECTABLE SUPPLY_SOURCE_ON_PREVIEW NO_COLLIDE SUPPLY_SOURCE
End

; -----------------------------------------------------------------------------
; Fair Auroras (Keeping only the visual change to the Air Force Aurora)
;
; From: https://www.youtube.com/watch?v=oRd6akDSUh0
; Author: AGX750
; -----------------------------------------------------------------------------

Object AirF_AmericaJetAurora
 RemoveModule ModuleTag_01
 AddModule
  Draw = W3DModelDraw ModuleTag_01

    DefaultConditionState
      Model = AVAuroraAG
      HideSubObject = BurnerFX03 BurnerFX04
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState = JETEXHAUST
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
    End

    ConditionState = JETEXHAUST JETAFTERBURNER
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
      ; afterburner
      ShowSubObject = BurnerFX03 BurnerFX04
      ParticleSysBone = Engine01 JetLenzflare
      ParticleSysBone = Engine02 JetLenzflare
    End

    ConditionState = REALLYDAMAGED
      Model = AVAuroraAG_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
    End

    ConditionState = REALLYDAMAGED JETEXHAUST
      Model = AVAuroraAG_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
    End

    ConditionState = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model = AVAuroraAG_D
      ; damage
      ParticleSysBone = Smoke01 JetSmoke
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ; afterburner
      ShowSubObject = BurnerFX03 BurnerFX04
      ParticleSysBone = Engine01 JetLenzflare
      ParticleSysBone = Engine02 JetLenzflare
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
    End

    ConditionState = RUBBLE
      Model = AVAurora_D1
      HideSubObject = None
      ShowSubObject = None
    End

    ConditionState = RUBBLE JETEXHAUST JETAFTERBURNER
      Model = AVAurora_D1
      ;HideSubObject is needed cause there're inherited from default condition state
      HideSubObject = None
      ShowSubObject = None
      ParticleSysBone = Engine01 JetExhaust
      ParticleSysBone = Engine02 JetExhaust
      ; exhaust
      ParticleSysBone = Wingtip01 JetContrail
      ParticleSysBone = Wingtip02 JetContrail
    End

    OkToChangeModelColor = Yes
  End
 End
End

; -----------------------------------------------------------------------------
; China Command Center shows Radar upgrades
; -----------------------------------------------------------------------------

; China -----------------------------------------------------------------------

Object ChinaCommandCenter
  ; Show China Radar upgrade
  UpgradeCameo1 = Upgrade_ChinaRadar
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; Tank ------------------------------------------------------------------------

Object Tank_ChinaCommandCenter
  ; Show China Radar upgrade
  UpgradeCameo1 = Upgrade_ChinaRadar
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; Infantry --------------------------------------------------------------------

Object Infa_ChinaCommandCenter
  ; Show China Radar upgrade
  UpgradeCameo1 = Upgrade_ChinaRadar
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; Nuke ------------------------------------------------------------------------

Object Nuke_ChinaCommandCenter
  ; Show China Radar upgrade
  UpgradeCameo1 = Upgrade_ChinaRadar
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; -----------------------------------------------------------------------------
; Fix Scorpion Shell FX
; -----------------------------------------------------------------------------

Object ScorpionTankShell
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
      DeathWeapon = ScorpionTankGunFXWeapon
      StartsActive = No
      TriggeredBy = Upgrade_GLAToxinShells Upgrade_GLAAnthraxBeta
      RequiresAllTriggers = Yes
      ConflictsWith = Chem_Upgrade_GLAAnthraxGamma
    End
  End

  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_10
      DeathWeapon = ScorpionTankGunFXWeapon
      StartsActive = No
      TriggeredBy = Upgrade_GLAToxinShells Chem_Upgrade_GLAAnthraxGamma
      RequiresAllTriggers = Yes
    End
  End
End

; -----------------------------------------------------------------------------
; Make the unused Militia Tank a generic unit accepting upgrades from all factions
; -----------------------------------------------------------------------------

Object Nuke_BattleMasterTankShell
  ; Militia Tank needs the combination of Toxin Shells and Uranium Shells for nuclear spill
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_08
      DeathWeapon = Nuke_NukeShellWeapon
      StartsActive = No
      TriggeredBy = Upgrade_GLAToxinShells Upgrade_ChinaUraniumShells
      RequiresAllTriggers = Yes
      ConflictsWith = Nuke_Upgrade_ChinaWGUraniumShells
    End
  End
End

CommandSet New_MilitiaTankCommandSet
  1 = Demo_Command_TertiarySuicide
  11 = Command_AttackMove
  13 = Command_Guard
  14 = Command_Stop
End

AudioEvent New_ScorpionTankVoiceSelect
  Sounds = vscoseb vscosec vscosed
  Control = random
  Volume = 90
  Type = ui voice player
End

AudioEvent New_ScorpionTankVoiceCreate
  Sounds = vscomog
  Control = random
  Volume = 110
  MinVolume = 100
  Priority = high
  Type = world global player
End

AudioEvent New_ScorpionTankVoiceAttack
  Sounds = vscoatc vscoatd vscoate
  Control = random
  Volume = 90
  Type = ui voice player
End

Object MilitiaTank
  SelectPortrait = SSTankDrop
  ButtonImage = SSTankDrop

  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Upgrade_ChinaUraniumShells
  UpgradeCameo3 = Upgrade_ChinaNuclearTanks
  UpgradeCameo4 = Nuke_Upgrade_ChinaWGUraniumShells
  UpgradeCameo5 = Upgrade_AmericaCompositeArmor

  WeaponSet
    Conditions = None
    Weapon = PRIMARY MarauderTankGun
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY None
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY Nuke_BattleMasterTankGun
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions = None
    Armor = TankArmor
    DamageFX = TankDamageFX
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor = TankArmor
    DamageFX = TankDamageFX
  End
  Prerequisites
  End
  CrusherLevel = 2
  CommandSet = New_MilitiaTankCommandSet

  VoiceSelect = New_ScorpionTankVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceGuard = ScorpionTankVoiceMove
  VoiceAttack = New_ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  UnitSpecificSounds
    VoiceCreate = New_ScorpionTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = ScorpionTankVoiceCrush
    VoiceEnter = ScorpionTankVoiceMove
  End

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

  Locomotor = SET_NORMAL MilitiaTankLocomotor
  Locomotor = SET_NORMAL_UPGRADED NuclearBattleMasterLocomotor

  RemoveModule ModuleTag_05

  RemoveModule ModuleTag_08
  AddModule
    Behavior = TransitionDamageFX ModuleTag_08
      ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
      ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
    End
  End

  AddModule
    Behavior = ExperienceScalarUpgrade ModuleTag_12
      TriggeredBy = Upgrade_AmericaAdvancedTraining
      AddXPScalar = 1.0
    End
  End

  ; Militia Tank should benefit from Composite Armor like Crusader Tanks but not twice
  AddModule
    Behavior = MaxHealthUpgrade ModuleTag_13
      TriggeredBy = Upgrade_AmericaCompositeArmor
      AddMaxHealth = 100.0
      ChangeType = ADD_CURRENT_HEALTH_TOO
    End
  End

  ; Explode with Nuclear Tanks
  ; Stop exploding with Isotope Stability or Fusion Reactors
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
      DeathWeapon = NuclearTankDeathWeapon
      StartsActive = No
      TriggeredBy = Upgrade_ChinaNuclearTanks
      ConflictsWith = Upgrade_ChinaIsotopeStability Nuke_Upgrade_ChinaFusionReactors
    End
  End

  ; Larger explosion with Fusion Reactors
  ; Stop exploding with Isotope Stability
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
      DeathWeapon = Nuke_NuclearTankDeathWeapon
      StartsActive = No
      TriggeredBy = Nuke_Upgrade_ChinaFusionReactors
      ConflictsWith = Upgrade_ChinaIsotopeStability
    End
  End

  AddModule
    Behavior = LocomotorSetUpgrade ModuleTag_17
      TriggeredBy = Upgrade_ChinaNuclearTanks
    End
  End

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_18
      TriggeredBy = Upgrade_ChinaUraniumShells
    End
  End

  AddModule
    Behavior = AutoHealBehavior ModuleTag_19
      HealingAmount = 2
      HealingDelay = 1000 ; msec
      TriggeredBy = Upgrade_GLAJunkRepair
    End
  End

  AddModule
    Behavior = WeaponSetUpgrade ModuleTag_20
      TriggeredBy = Upgrade_ChinaUraniumShells Nuke_Upgrade_ChinaWGUraniumShells
    End
  End

  AddModule
    Behavior = SlowDeathBehavior ModuleTag_Death_21
      DeathTypes = NONE +SUICIDED +EXPLODED
      SinkDelay = 3000
      SinkRate = 0.5
      DestructionDelay = 8000
      FX = INITIAL FX_TerroristExplode
      FlingForce = 8
      FlingForceVariance = 3
      FlingPitch = 60
      FlingPitchVariance = 10
    End
  End

  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag998
      DeathWeapon = Demo_SuicideDynamitePackPlusFire
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      DeathTypes = NONE +SUICIDED
    End
  End

  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag999
      DeathWeapon = Demo_DestroyedWeapon
      StartsActive = No
      TriggeredBy = Demo_Upgrade_SuicideBomb
      DeathTypes = ALL -SUICIDED
    End
  End
End

; Militia Tank should cost 800 to match Battle Master & Marauder (Crusader is 900, Militia Tank was 500)
; Militia Tank should take 10 seconds to produce to match Crusader, Battle Master, and Marauder (Militia Tank was 12)

PlayerTemplate FactionAmerica
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionChina
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionGLA
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionAmericaSuperWeaponGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionAmericaLaserGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionAmericaAirForceGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionChinaTankGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionChinaInfantryGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionChinaNukeGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionGLAToxinGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionGLADemolitionGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

PlayerTemplate FactionGLAStealthGeneral
  ProductionCostChange = MilitiaTank 60%
  ProductionTimeChange = MilitiaTank -16.66%
End

; -----------------------------------------------------------------------------
; Reinforcement Pad drops Militia Tanks
; -----------------------------------------------------------------------------

ObjectCreationList OCL_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_SWGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_LGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_AFGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_InfGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_TnkGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_NukeGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ToxGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_DemoGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_StlthGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes
    DeliveryDistance = 250
  End
End

; -----------------------------------------------------------------------------
; Add missing destruction FX to Patriot Missile System
; -----------------------------------------------------------------------------

Object AmericaPatriotBattery
  AddModule
    Behavior = CreateObjectDie ModuleTag_11
      CreationList = OCL_LargeStructureDebris
    End
  End
End

Object SupW_AmericaPatriotBattery
  AddModule
    Behavior = CreateObjectDie ModuleTag_11
      CreationList = OCL_LargeStructureDebris
    End
  End
End

Object Lazr_AmericaPatriotBattery
  AddModule
    Behavior = CreateObjectDie ModuleTag_11
      CreationList = OCL_LargeStructureDebris
    End
  End
End

Object AirF_AmericaPatriotBattery
  AddModule
    Behavior = CreateObjectDie ModuleTag_11
      CreationList = OCL_LargeStructureDebris
    End
  End
End

; -----------------------------------------------------------------------------
; Change Hijacker requirement to Arms Dealer
; -----------------------------------------------------------------------------

; Decrease requirement from Palace to Arms Dealer
Object GLAInfantryHijacker
  Prerequisites
    Object = GLABarracks
    Object = GLAArmsDealer
    Science = SCIENCE_Hijacker
  End
End

; Stand-in for Toxin Hijacker
Object GC_Chem_GLAInfantryHijacker
  Prerequisites
    Object = Chem_GLABarracks
    Object = Chem_GLAArmsDealer
    Science = SCIENCE_Hijacker
  End
End

; Increase requirement from Barracks to Arms Dealer
Object Demo_GLAInfantryHijacker
  Prerequisites
    Object = Demo_GLABarracks
    Object = Demo_GLAArmsDealer
    Science = SCIENCE_Hijacker
  End
End

; Increase requirement from Barracks to Arms Dealer
Object Slth_GLAInfantryHijacker
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAArmsDealer
  End
End

; -----------------------------------------------------------------------------
; General's Promotion shows units that start unlocked
; -----------------------------------------------------------------------------

Science SCIENCE_AirF_CarpetBomb
  PrerequisiteSciences = SCIENCE_AMERICA SCIENCE_Rank3
  SciencePurchasePointCost = 1
  IsGrantable = Yes
  DisplayName = SCIENCE:ChinaCarpetBomb
  Description = CONTROLBAR:AirF_ToolTipUSAScienceCarpetBomb
End

Science SCIENCE_PaladinTank
  PrerequisiteSciences = SCIENCE_AMERICA SCIENCE_Rank3
  SciencePurchasePointCost = 1
  IsGrantable = Yes
  DisplayName = SCIENCE:USAPaladin
  Description = CONTROLBAR:ToolTipUSASciencePaladin
End

; USA -------------------------------------------------------------------------

CommandSet New_AmericaCommandCenterCommandSet
  1 = Command_ConstructAmericaDozer
  2 = Command_SpectreGunship
  4 = Command_LeafletDrop
  5 = Command_A10ThunderboltMissileStrike
  6 = Command_Paradrop
  7 = Command_SpyDrone
; 8 = Command_EmergencyRepair
  8 = Early_Command_EmergencyRepair
  9 = Command_DaisyCutter
  10 = Command_SpySatelliteScan
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object AmericaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_AmericaCommandCenterCommandSet

  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_PaladinTank
      TriggeredBy = Upgrade_AmericaRadar
    End
  End

  RemoveModule ModuleTag_27
  AddModule
    Behavior = OCLSpecialPower ModuleTag_27
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
CommandSet New_SpecialPowerShortcutUSA
  1 = Command_SpyDroneFromShortcut
  2 = Command_ParadropFromShortcut
  3 = Command_A10ThunderboltMissileStrikeFromShortcut
; 3 = AirF_Command_A10ThunderboltMissileStrikeFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_DaisyCutterFromShortcut
  6 = Command_FireParticleUplinkCannonFromShortcut
  7 = Command_SpySatelliteScanFromShortcut
  8 = Command_CIAIntelligenceFromShortcut
  9 = Command_SpectreGunshipFromShortcut
; 9 = AirF_Command_SpectreGunshipFromShortcut
  10 = Command_LeafletDropFromShortcut
; 10 = Early_Command_LeafletDropFromShortcut
; 11 = AirF_Command_CarpetBombFromShortcut
End

CommandSet New_SCIENCE_AMERICA_CommandSetRank1
  1 = Command_PurchaseSciencePaladinTank
  2 = Command_PurchaseScienceStealthFighter
  3 = Command_PurchaseScienceSpyDrone
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_SCIENCE_AMERICA_CommandSetRank3
  1 = Command_PurchaseSciencePathfinder
  4 = Command_PurchaseScienceParadrop1
  5 = Command_PurchaseScienceParadrop2
  6 = Command_PurchaseScienceParadrop3
  7 = Command_PurchaseScienceA10ThunderboltMissileStrike1
  8 = Command_PurchaseScienceA10ThunderboltMissileStrike2
  9 = Command_PurchaseScienceA10ThunderboltMissileStrike3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_SCIENCE_AMERICA_CommandSetRank8
  1 = Command_PurchaseScienceDaisyCutter
  2 = Command_PurchaseScienceLeafletDrop
  3 = Command_PurchaseScienceSpectreGunship
  5 = Command_FAKECOMMAND_PurchaseScienceMOAB
End

PlayerTemplate FactionAmerica
  PurchaseScienceCommandSetRank1 = New_SCIENCE_AMERICA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_SCIENCE_AMERICA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_SCIENCE_AMERICA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_SpecialPowerShortcutUSA
End

; China -----------------------------------------------------------------------

CommandSet New_ChinaCommandCenterCommandSet
  1 = Command_ConstructChinaDozer
  2 = Early_Command_ChinaCarpetBomb
  3 = Command_NapalmStrike
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
; 7 = Command_EmergencyRepair
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeChinaMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

CommandSet New_ChinaCommandCenterCommandSetUpgrade
  1 = Command_ConstructChinaDozer
  2 = Early_Command_ChinaCarpetBomb
  3 = Command_NapalmStrike
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
; 7 = Command_EmergencyRepair
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeEMPMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object ChinaCommandCenter
  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  RemoveModule ModuleTag_21
  AddModule
    Behavior = OCLSpecialPower ModuleTag_21
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End

  ; Apply new CommandSet
  CommandSet = New_ChinaCommandCenterCommandSet
  RemoveModule ModuleTag_25
  AddModule
    Behavior = CommandSetUpgrade ModuleTag_25
      CommandSet = New_ChinaCommandCenterCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End
End

; Early Emergency Repair
CommandSet New_SpecialPowerShortcutChina
  1 = Command_ClusterMinesFromShortcut
  2 = Command_ArtilleryBarrageFromShortcut
  3 = Command_CashHackFromShortcut
; 3 = Tank_Command_TankParadropFromShortcut
; 3 = Infa_Command_ParadropFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_EMPPulseFromShortcut
  6 = Command_NeutronMissileFromShortcut
  7 = Early_Command_ChinaCarpetBombFromShortcut
; 7 = Command_ChinaCarpetBombFromShortcut
; 7 = Nuke_Command_ChinaCarpetBombFromShortcut
  8 = Command_FrenzyFromShortcut
; 8 = Early_Command_FrenzyFromShortcut
End

CommandSet New_SCIENCE_CHINA_CommandSetRank1
  1 = Command_PurchaseScienceRedGuardTraining
  2 = Command_PurchaseScienceArtilleryTraining
  3 = Command_PurchaseScienceNukeLauncher
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_SCIENCE_CHINA_CommandSetRank3
  1 = Command_PurchaseScienceClusterMines
  3 = Early_Command_PurchaseScienceCarpetBomb
  4 = Command_PurchaseScienceArtilleryBarrage1
  5 = Command_PurchaseScienceArtilleryBarrage2
  6 = Command_PurchaseScienceArtilleryBarrage3
  7 = Command_PurchaseScienceCashHack1
  8 = Command_PurchaseScienceCashHack2
  9 = Command_PurchaseScienceCashHack3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
  13 = Command_PurchaseScienceFrenzy1
  14 = Command_PurchaseScienceFrenzy2
  15 = Command_PurchaseScienceFrenzy3
End

CommandSet New_SCIENCE_CHINA_CommandSetRank8
  1 = Command_PurchaseScienceEMPPulse
End

PlayerTemplate FactionChina
  PurchaseScienceCommandSetRank1 = New_SCIENCE_CHINA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_SCIENCE_CHINA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_SCIENCE_CHINA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_SpecialPowerShortcutChina
End

; GLA -------------------------------------------------------------------------

CommandSet New_GLACommandCenterCommandSet
  1 = Command_ConstructGLAWorker
  4 = Command_GPSScrambler
  5 = Command_Ambush
; 6 = Command_EmergencyRepair
  6 = Early_Command_EmergencyRepair
  7 = Command_AnthraxBomb
  8 = Command_SneakAttack
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object GLACommandCenter
  ; Apply new CommandSet
  CommandSet = New_GLACommandCenterCommandSet

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  RemoveModule ModuleTag_14
  AddModule
    Behavior = OCLSpecialPower ModuleTag_14
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
CommandSet New_SpecialPowerShortcutGLA
  1 = Command_AmbushFromShortcut
; 1 = Chem_Command_AmbushFromShortcut
; 2 = Command_EmergencyRepairFromShortcut
  2 = Early_Command_EmergencyRepairFromShortcut
  3 = Command_AnthraxBombFromShortcut
  4 = Command_ScudStormFromShortcut
  5 = Command_RadarVanScanFromShortcut
  6 = Command_SneakAttackFromShortcut
  7 = Command_GPSScramblerFromShortcut
; 7 = Slth_Command_GPSScramblerFromShortcut
End

CommandSet New_SCIENCE_GLA_CommandSetRank1
  1 = Command_PurchaseScienceScudLauncher
  2 = Command_PurchaseScienceMarauderTank
  3 = Command_PurchaseScienceTechnicalTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_SCIENCE_GLA_CommandSetRank3
  1 = Command_PurchaseScienceHijacker
  4 = Command_PurchaseScienceRebelAmbush1
  5 = Command_PurchaseScienceRebelAmbush2
  6 = Command_PurchaseScienceRebelAmbush3
  7 = Command_PurchaseScienceCashBounty1
  8 = Command_PurchaseScienceCashBounty2
  9 = Command_PurchaseScienceCashBounty3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_SCIENCE_GLA_CommandSetRank8
  1 = Command_PurchaseScienceAnthraxBomb
  2 = Command_PurchaseScienceSneakAttack
  3 = Command_PurchaseScienceGPSScrambler
End

PlayerTemplate FactionGLA
  PurchaseScienceCommandSetRank1 = New_SCIENCE_GLA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_SCIENCE_GLA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_SCIENCE_GLA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_SpecialPowerShortcutGLA
End

; Super Weapon ----------------------------------------------------------------

CommandSet New_SupW_AmericaCommandCenterCommandSet
  1 = SupW_Command_ConstructAmericaDozer
  2 = AirF_Command_SpectreGunship
  4 = Early_Command_LeafletDrop
  5 = Command_A10ThunderboltMissileStrike
  6 = Command_Paradrop
  7 = Command_SpyDrone
; 8 = Command_EmergencyRepair
  8 = Early_Command_EmergencyRepair
  9 = Command_DaisyCutter
  10 = Command_SpySatelliteScan
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Command Center comes with USA Radar upgrade which has no effect and triggers GrantScienceUpgrade on game start
; Secret - Super Weapon always has access to Scud Launchers from captured buildings
Object SupW_AmericaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_SupW_AmericaCommandCenterCommandSet

  ; Secret - Super Weapon gets access to Scud Launcher
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_ScudLauncher
      TriggeredBy = Upgrade_AmericaRadar
    End
  End

  RemoveModule ModuleTag_27
  AddModule
    Behavior = OCLSpecialPower ModuleTag_27
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
; Spy Satellite and Particle Cannon were swapped
; Separate Super Weapon Particle Cannon shortcut was unnecessary
; Spectre Gunship, Leaflet Drop, and Intelligence were ordered incorrectly
CommandSet New_SupW_SpecialPowerShortcutUSA
  1 = Command_SpyDroneFromShortcut
  2 = Command_ParadropFromShortcut
  3 = Command_A10ThunderboltMissileStrikeFromShortcut
; 3 = AirF_Command_A10ThunderboltMissileStrikeFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_DaisyCutterFromShortcut
  6 = Command_FireParticleUplinkCannonFromShortcut
  7 = Command_SpySatelliteScanFromShortcut
  8 = Command_CIAIntelligenceFromShortcut
; 9 = Command_SpectreGunshipFromShortcut
  9 = AirF_Command_SpectreGunshipFromShortcut
; 10 = Command_LeafletDropFromShortcut
  10 = Early_Command_LeafletDropFromShortcut
; 11 = AirF_Command_CarpetBombFromShortcut
End

CommandSet New_SupW_SCIENCE_AMERICA_CommandSetRank1
  1 = Command_PurchaseScienceSpyDrone
  2 = Command_PurchaseScienceStealthFighter
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_SupW_SCIENCE_AMERICA_CommandSetRank3
  1 = Command_PurchaseSciencePathfinder
  3 = Early_Command_PurchaseScienceLeafletDrop
  4 = Command_PurchaseScienceParadrop1
  5 = Command_PurchaseScienceParadrop2
  6 = Command_PurchaseScienceParadrop3
; 7 = Command_PurchaseScienceA10ThunderboltMissileStrike1
; 8 = Command_PurchaseScienceA10ThunderboltMissileStrike2
; 9 = Command_PurchaseScienceA10ThunderboltMissileStrike3
  8 = Command_PurchaseScienceSpectreGunship1
  9 = Command_PurchaseScienceSpectreGunship2
; 10 = Command_PurchaseScienceEmergencyRepair1
; 11 = Command_PurchaseScienceEmergencyRepair2
; 12 = Command_PurchaseScienceEmergencyRepair3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
; 14 = Command_PurchaseScienceSpectreGunship1
; 15 = Command_PurchaseScienceSpectreGunship2
  13 = Command_PurchaseScienceA10ThunderboltMissileStrike1
  14 = Command_PurchaseScienceA10ThunderboltMissileStrike2
  15 = Command_PurchaseScienceA10ThunderboltMissileStrike3
End

CommandSet New_SupW_SCIENCE_AMERICA_CommandSetRank8
  1 = Command_PurchaseScienceDaisyCutter
; 2 = Command_PurchaseScienceSpectreGunship3
  3 = Command_PurchaseScienceSpectreGunship3
  5 = Command_FAKECOMMAND_PurchaseScienceMOAB
End

PlayerTemplate FactionAmericaSuperWeaponGeneral
  PurchaseScienceCommandSetRank1 = New_SupW_SCIENCE_AMERICA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_SupW_SCIENCE_AMERICA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_SupW_SCIENCE_AMERICA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_SupW_SpecialPowerShortcutUSA
End

; Laser -----------------------------------------------------------------------

CommandSet New_Lazr_AmericaCommandCenterCommandSet
  1 = Lazr_Command_ConstructAmericaDozer
  2 = Command_SpectreGunship
  4 = Command_LeafletDrop
  5 = Command_A10ThunderboltMissileStrike
  6 = Command_Paradrop
  7 = Command_SpyDrone
; 8 = Command_EmergencyRepair
  8 = Early_Command_EmergencyRepair
  9 = Command_DaisyCutter
  10 = Command_SpySatelliteScan
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Lazr_AmericaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_Lazr_AmericaCommandCenterCommandSet

  RemoveModule ModuleTag_27
  AddModule
    Behavior = OCLSpecialPower ModuleTag_27
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
; Remove duplicate Laser Particle Cannon shortcut
CommandSet New_Lazr_SpecialPowerShortcutUSA
  1 = Command_SpyDroneFromShortcut
  2 = Command_ParadropFromShortcut
  3 = Command_A10ThunderboltMissileStrikeFromShortcut
; 3 = AirF_Command_A10ThunderboltMissileStrikeFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_DaisyCutterFromShortcut
  6 = Command_FireParticleUplinkCannonFromShortcut
  7 = Command_SpySatelliteScanFromShortcut
  8 = Command_CIAIntelligenceFromShortcut
  9 = Command_SpectreGunshipFromShortcut
; 9 = AirF_Command_SpectreGunshipFromShortcut
  10 = Command_LeafletDropFromShortcut
; 10 = Early_Command_LeafletDropFromShortcut
; 11 = AirF_Command_CarpetBombFromShortcut
End

CommandSet New_Lazr_SCIENCE_AMERICA_CommandSetRank1
  1 = Command_PurchaseScienceSpyDrone
  2 = Command_PurchaseScienceStealthFighter
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Lazr_SCIENCE_AMERICA_CommandSetRank3
  1 = Command_PurchaseSciencePathfinder
  4 = Command_PurchaseScienceParadrop1
  5 = Command_PurchaseScienceParadrop2
  6 = Command_PurchaseScienceParadrop3
  7 = Command_PurchaseScienceA10ThunderboltMissileStrike1
  8 = Command_PurchaseScienceA10ThunderboltMissileStrike2
  9 = Command_PurchaseScienceA10ThunderboltMissileStrike3
; 10 = Command_PurchaseScienceEmergencyRepair1
; 11 = Command_PurchaseScienceEmergencyRepair2
; 12 = Command_PurchaseScienceEmergencyRepair3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_Lazr_SCIENCE_AMERICA_CommandSetRank8
  1 = Command_PurchaseScienceDaisyCutter
  2 = Command_PurchaseScienceLeafletDrop
  3 = Command_PurchaseScienceSpectreGunship
  5 = Command_FAKECOMMAND_PurchaseScienceMOAB
End

PlayerTemplate FactionAmericaLaserGeneral
  PurchaseScienceCommandSetRank1 = New_Lazr_SCIENCE_AMERICA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Lazr_SCIENCE_AMERICA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Lazr_SCIENCE_AMERICA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Lazr_SpecialPowerShortcutUSA
End

; Air Force -------------------------------------------------------------------

CommandSet New_AirF_AmericaCommandCenterCommandSet
  1 = AirF_Command_ConstructAmericaDozer
  2 = AirF_Command_SpectreGunship
  4 = Command_LeafletDrop
  5 = AirF_Command_A10ThunderboltMissileStrike
  6 = Command_Paradrop
  7 = Command_SpyDrone
  8 = Early_Command_EmergencyRepair
  9 = Command_DaisyCutter
  10 = Command_SpySatelliteScan
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Command Center comes with USA Radar upgrade which has no effect and triggers GrantScienceUpgrade on game start
Object AirF_AmericaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_AirF_AmericaCommandCenterCommandSet

  ; Air Force already started with Stealth Fighter unlocked
  ; Stealth Fighter is always available from captured Air Force Airfield
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_StealthFighter
      TriggeredBy = Upgrade_AmericaRadar
    End
  End
End

; No changes
CommandSet New_AirF_SpecialPowerShortcutUSA
  1 = Command_SpyDroneFromShortcut
  2 = Command_ParadropFromShortcut
; 3 = Command_A10ThunderboltMissileStrikeFromShortcut
  3 = AirF_Command_A10ThunderboltMissileStrikeFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_DaisyCutterFromShortcut
  6 = Command_FireParticleUplinkCannonFromShortcut
  7 = Command_SpySatelliteScanFromShortcut
  8 = Command_CIAIntelligenceFromShortcut
; 9 = Command_SpectreGunshipFromShortcut
  9 = AirF_Command_SpectreGunshipFromShortcut
  10 = Command_LeafletDropFromShortcut
; 10 = Early_Command_LeafletDropFromShortcut
  11 = AirF_Command_CarpetBombFromShortcut
End

CommandSet New_AirF_SCIENCE_AMERICA_CommandSetRank1
  1 = Command_PurchaseScienceSpyDrone
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_AirF_SCIENCE_AMERICA_CommandSetRank3
  1 = Command_PurchaseSciencePathfinder
  3 = AirF_Command_PurchaseScienceCarpetBomb
  4 = Command_PurchaseScienceParadrop1
  5 = Command_PurchaseScienceParadrop2
  6 = Command_PurchaseScienceParadrop3
  8 = Command_PurchaseScienceSpectreGunship1
  9 = Command_PurchaseScienceSpectreGunship2
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
  13 = AirF_Command_PurchaseScienceA10ThunderboltMissileStrike1
  14 = AirF_Command_PurchaseScienceA10ThunderboltMissileStrike2
  15 = AirF_Command_PurchaseScienceA10ThunderboltMissileStrike3
End

CommandSet New_AirF_SCIENCE_AMERICA_CommandSetRank8
  1 = Command_PurchaseScienceDaisyCutter
  2 = Command_PurchaseScienceLeafletDrop
  3 = Command_PurchaseScienceSpectreGunship3
  4 = Command_PurchaseScienceStealthFighter
  5 = Command_FAKECOMMAND_PurchaseScienceMOAB
End

PlayerTemplate FactionAmericaAirForceGeneral
  PurchaseScienceCommandSetRank1 = New_AirF_SCIENCE_AMERICA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_AirF_SCIENCE_AMERICA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_AirF_SCIENCE_AMERICA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_AirF_SpecialPowerShortcutUSA
End

; Tank ------------------------------------------------------------------------

; No changes
CommandSet New_Tank_ChinaCommandCenterCommandSet
  1 = Tank_Command_ConstructChinaDozer
  2 = Command_ChinaCarpetBomb
  3 = Tank_Command_TankParadrop
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeChinaMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; No changes
CommandSet New_Tank_ChinaCommandCenterCommandSetUpgrade
  1 = Tank_Command_ConstructChinaDozer
  2 = Command_ChinaCarpetBomb
  3 = Tank_Command_TankParadrop
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeEMPMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Secret - Tank always has access to Marauder Tanks from captured buildings
Object Tank_ChinaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_Tank_ChinaCommandCenterCommandSet
  RemoveModule ModuleTag_28
  AddModule
    Behavior = CommandSetUpgrade ModuleTag_28
      CommandSet = New_Tank_ChinaCommandCenterCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  ; Secret - Tank gets access to Marauder Tank
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_MarauderTank
      TriggeredBy = Upgrade_AmericaRadar
    End
  End
End

; No changes
CommandSet New_Tank_SpecialPowerShortcutChina
  1 = Command_ClusterMinesFromShortcut
  2 = Command_ArtilleryBarrageFromShortcut
; 3 = Command_CashHackFromShortcut
  3 = Tank_Command_TankParadropFromShortcut
; 3 = Infa_Command_ParadropFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_EMPPulseFromShortcut
  6 = Command_NeutronMissileFromShortcut
; 7 = Early_Command_ChinaCarpetBombFromShortcut
  7 = Command_ChinaCarpetBombFromShortcut
; 7 = Nuke_Command_ChinaCarpetBombFromShortcut
  8 = Command_FrenzyFromShortcut
; 8 = Early_Command_FrenzyFromShortcut
End

CommandSet New_Tank_SCIENCE_CHINA_CommandSetRank1
  1 = Command_PurchaseScienceRedGuardTraining
  2 = Command_PurchaseScienceBattlemasterTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Tank_SCIENCE_CHINA_CommandSetRank3
  1 = Command_PurchaseScienceClusterMines
  4 = Command_PurchaseScienceArtilleryBarrage1
  5 = Command_PurchaseScienceArtilleryBarrage2
  6 = Command_PurchaseScienceArtilleryBarrage3
  7 = Tank_Command_PurchaseScienceTankParadrop1
  8 = Tank_Command_PurchaseScienceTankParadrop2
  9 = Tank_Command_PurchaseScienceTankParadrop3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
  13 = Command_PurchaseScienceFrenzy1
  14 = Command_PurchaseScienceFrenzy2
  15 = Command_PurchaseScienceFrenzy3
End

CommandSet New_Tank_SCIENCE_CHINA_CommandSetRank8
  1 = Command_PurchaseScienceEMPPulse
  2 = Command_PurchaseScienceCarpetBomb
End

PlayerTemplate FactionChinaTankGeneral
  PurchaseScienceCommandSetRank1 = New_Tank_SCIENCE_CHINA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Tank_SCIENCE_CHINA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Tank_SCIENCE_CHINA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Tank_SpecialPowerShortcutChina
End

; Infantry --------------------------------------------------------------------

; No changes
CommandSet New_Infa_ChinaCommandCenterCommandSet
  1 = Infa_Command_ConstructChinaDozer
  2 = Early_Command_ChinaCarpetBomb
  3 = Infa_Command_Paradrop
  4 = Command_ClusterMines
  6 = Command_ArtilleryBarrage
  7 = Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Early_Command_Frenzy
  12 = Command_UpgradeChinaMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Was missing Frenzy power
CommandSet New_Infa_ChinaCommandCenterCommandSetUpgrade
  1 = Infa_Command_ConstructChinaDozer
  2 = Command_ChinaCarpetBomb
  3 = Command_NapalmStrike
  4 = Command_ClusterMines
  5 = Infa_Command_Paradrop
  6 = Command_ArtilleryBarrage
  7 = Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Early_Command_Frenzy
  12 = Command_UpgradeEMPMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Infa_ChinaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_Infa_ChinaCommandCenterCommandSet
  RemoveModule ModuleTag_25
  AddModule
    Behavior = CommandSetUpgrade ModuleTag_25
      CommandSet = New_Infa_ChinaCommandCenterCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End
End

; No changes
CommandSet New_Infa_SpecialPowerShortcutChina
  1 = Command_ClusterMinesFromShortcut
  2 = Command_ArtilleryBarrageFromShortcut
; 3 = Command_CashHackFromShortcut
; 3 = Tank_Command_TankParadropFromShortcut
  3 = Infa_Command_ParadropFromShortcut
  4 = Command_EmergencyRepairFromShortcut
; 4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_EMPPulseFromShortcut
  6 = Command_NeutronMissileFromShortcut
  7 = Early_Command_ChinaCarpetBombFromShortcut
; 7 = Command_ChinaCarpetBombFromShortcut
; 7 = Nuke_Command_ChinaCarpetBombFromShortcut
; 8 = Command_FrenzyFromShortcut
  8 = Early_Command_FrenzyFromShortcut
End

CommandSet New_Infa_SCIENCE_CHINA_CommandSetRank1
  1 = Infa_Command_PurchaseScienceRedGuardTraining
  2 = Command_PurchaseScienceArtilleryTraining
  3 = Command_PurchaseScienceNukeLauncher
  4 = Early_Command_PurchaseScienceFrenzy1
End

CommandSet New_Infa_SCIENCE_CHINA_CommandSetRank3
  1 = Command_PurchaseScienceClusterMines
  3 = Early_Command_PurchaseScienceCarpetBomb
  4 = Command_PurchaseScienceArtilleryBarrage1
  5 = Command_PurchaseScienceArtilleryBarrage2
  6 = Command_PurchaseScienceArtilleryBarrage3
  7 = Command_PurchaseScienceEmergencyRepair1
  8 = Command_PurchaseScienceEmergencyRepair2
  9 = Command_PurchaseScienceEmergencyRepair3
  10 = Early_Command_PurchaseScienceFrenzy2
  11 = Early_Command_PurchaseScienceFrenzy3
  13 = Infa_Command_PurchaseScienceInfantryParadrop1
  14 = Infa_Command_PurchaseScienceInfantryParadrop2
  15 = Infa_Command_PurchaseScienceInfantryParadrop3
End

CommandSet New_Infa_SCIENCE_CHINA_CommandSetRank8
  1 = Command_PurchaseScienceEMPPulse
End

PlayerTemplate FactionChinaInfantryGeneral
  PurchaseScienceCommandSetRank1 = New_Infa_SCIENCE_CHINA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Infa_SCIENCE_CHINA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Infa_SCIENCE_CHINA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Infa_SpecialPowerShortcutChina
End

; Nuke ------------------------------------------------------------------------

; No changes
CommandSet New_Nuke_ChinaCommandCenterCommandSet
  1 = Nuke_Command_ConstructChinaDozer
  2 = Nuke_Command_ChinaCarpetBomb
  3 = Command_NapalmStrike
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeChinaMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Was missing Frenzy power
CommandSet New_Nuke_ChinaCommandCenterCommandSetUpgrade
  1 = Nuke_Command_ConstructChinaDozer
  2 = Nuke_Command_ChinaCarpetBomb
  3 = Command_NapalmStrike
  4 = Command_ClusterMines
  5 = Command_CashHack
  6 = Command_ArtilleryBarrage
  7 = Early_Command_EmergencyRepair
  8 = Command_EMPPulse
  9 = Command_UpgradeChinaRadar
  10 = Command_Frenzy
  12 = Command_UpgradeEMPMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Nuke_ChinaCommandCenter
  ; Apply new CommandSet
  CommandSet = New_Nuke_ChinaCommandCenterCommandSet
  RemoveModule ModuleTag_25
  AddModule
    Behavior = CommandSetUpgrade ModuleTag_25
      CommandSet = New_Nuke_ChinaCommandCenterCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  ; Nuke already started with Nuke Launcher unlocked
  ; Nuke Launcher is always available from captured Nuke War Factory
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_NukeLauncher
      TriggeredBy = Upgrade_AmericaRadar
    End
  End
End

; Frenzy was defined later than needed
CommandSet New_Nuke_SpecialPowerShortcutChina
  1 = Command_ClusterMinesFromShortcut
  2 = Command_ArtilleryBarrageFromShortcut
  3 = Command_CashHackFromShortcut
; 3 = Tank_Command_TankParadropFromShortcut
; 3 = Infa_Command_ParadropFromShortcut
; 4 = Command_EmergencyRepairFromShortcut
  4 = Early_Command_EmergencyRepairFromShortcut
  5 = Command_EMPPulseFromShortcut
  6 = Command_NeutronMissileFromShortcut
; 7 = Early_Command_ChinaCarpetBombFromShortcut
; 7 = Command_ChinaCarpetBombFromShortcut
  7 = Nuke_Command_ChinaCarpetBombFromShortcut
  8 = Command_FrenzyFromShortcut
; 8 = Early_Command_FrenzyFromShortcut
End

CommandSet New_Nuke_SCIENCE_CHINA_CommandSetRank1
  1 = Command_PurchaseScienceRedGuardTraining
  2 = Command_PurchaseScienceArtilleryTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Nuke_SCIENCE_CHINA_CommandSetRank3
  1 = Command_PurchaseScienceClusterMines
  3 = Nuke_Command_PurchaseScienceCarpetBomb
  4 = Command_PurchaseScienceArtilleryBarrage1
  5 = Command_PurchaseScienceArtilleryBarrage2
  6 = Command_PurchaseScienceArtilleryBarrage3
  7 = Command_PurchaseScienceCashHack1
  8 = Command_PurchaseScienceCashHack2
  9 = Command_PurchaseScienceCashHack3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
  13 = Command_PurchaseScienceFrenzy1
  14 = Command_PurchaseScienceFrenzy2
  15 = Command_PurchaseScienceFrenzy3
End

CommandSet New_Nuke_SCIENCE_CHINA_CommandSetRank8
  1 = Command_PurchaseScienceEMPPulse
  4 = Command_PurchaseScienceNukeLauncher
End

PlayerTemplate FactionChinaNukeGeneral
  PurchaseScienceCommandSetRank1 = New_Nuke_SCIENCE_CHINA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Nuke_SCIENCE_CHINA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Nuke_SCIENCE_CHINA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Nuke_SpecialPowerShortcutChina
End

; Toxin -----------------------------------------------------------------------

CommandSet New_Chem_GLACommandCenterCommandSet
  1 = Chem_Command_ConstructGLAWorker
  5 = Chem_Command_Ambush
; 6 = Command_EmergencyRepair
  6 = Early_Command_EmergencyRepair
  7 = Command_AnthraxBomb
  8 = Command_SneakAttack
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Chem_GLACommandCenter
  ; Apply new CommandSet
  CommandSet = New_Chem_GLACommandCenterCommandSet

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  RemoveModule ModuleTag_14
  AddModule
    Behavior = OCLSpecialPower ModuleTag_14
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
CommandSet New_Chem_SpecialPowerShortcutGLA
; 1 = Command_AmbushFromShortcut
  1 = Chem_Command_AmbushFromShortcut
; 2 = Command_EmergencyRepairFromShortcut
  2 = Early_Command_EmergencyRepairFromShortcut
  3 = Command_AnthraxBombFromShortcut
  4 = Command_ScudStormFromShortcut
  5 = Command_RadarVanScanFromShortcut
  6 = Command_SneakAttackFromShortcut
; 7 = Command_GPSScramblerFromShortcut
; 7 = Slth_Command_GPSScramblerFromShortcut
End

CommandSet New_Chem_SCIENCE_GLA_CommandSetRank1
  1 = Command_PurchaseScienceScudLauncher
  2 = Chem_Command_PurchaseScienceMarauderTank
  3 = Chem_Command_PurchaseScienceTechnicalTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Chem_SCIENCE_GLA_CommandSetRank3
  4 = Chem_Command_PurchaseScienceRebelAmbush1
  5 = Chem_Command_PurchaseScienceRebelAmbush2
  6 = Chem_Command_PurchaseScienceRebelAmbush3
  7 = Command_PurchaseScienceCashBounty1
  8 = Command_PurchaseScienceCashBounty2
  9 = Command_PurchaseScienceCashBounty3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_Chem_SCIENCE_GLA_CommandSetRank8
  1 = Command_PurchaseScienceAnthraxBomb
  2 = Command_PurchaseScienceSneakAttack
; 3 = Command_PurchaseScienceGPSScrambler
End

PlayerTemplate FactionGLAToxinGeneral
  PurchaseScienceCommandSetRank1 = New_Chem_SCIENCE_GLA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Chem_SCIENCE_GLA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Chem_SCIENCE_GLA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Chem_SpecialPowerShortcutGLA
End

; Demolition ------------------------------------------------------------------

; Early Emergency Repair
CommandSet New_Demo_GLACommandCenterCommandSet
  1 = Demo_Command_ConstructGLAWorker
  4 = Command_GPSScrambler
  5 = Command_Ambush
; 6 = Command_EmergencyRepair
  6 = Early_Command_EmergencyRepair
  7 = Command_AnthraxBomb
  8 = Command_SneakAttack
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Demo_GLACommandCenter
  ; Apply new CommandSet
  CommandSet = New_Demo_GLACommandCenterCommandSet

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  RemoveModule ModuleTag_14
  AddModule
    Behavior = OCLSpecialPower ModuleTag_14
      SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
      UpgradeOCL = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
      UpgradeOCL = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
      OCL = SUPERWEAPON_RepairVehicles1
      CreateLocation = CREATE_AT_LOCATION
    End
  End
End

; Early Emergency Repair
CommandSet New_Demo_SpecialPowerShortcutGLA
  1 = Command_AmbushFromShortcut
; 1 = Chem_Command_AmbushFromShortcut
; 2 = Command_EmergencyRepairFromShortcut
  2 = Early_Command_EmergencyRepairFromShortcut
  3 = Command_AnthraxBombFromShortcut
  4 = Command_ScudStormFromShortcut
  5 = Command_RadarVanScanFromShortcut
  6 = Command_SneakAttackFromShortcut
  7 = Command_GPSScramblerFromShortcut
; 7 = Slth_Command_GPSScramblerFromShortcut
End

CommandSet New_Demo_SCIENCE_GLA_CommandSetRank1
  1 = Command_PurchaseScienceScudLauncher
  2 = Command_PurchaseScienceMarauderTank
  3 = Command_PurchaseScienceTechnicalTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Demo_SCIENCE_GLA_CommandSetRank3
  4 = Command_PurchaseScienceRebelAmbush1
  5 = Command_PurchaseScienceRebelAmbush2
  6 = Command_PurchaseScienceRebelAmbush3
  7 = Command_PurchaseScienceCashBounty1
  8 = Command_PurchaseScienceCashBounty2
  9 = Command_PurchaseScienceCashBounty3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_Demo_SCIENCE_GLA_CommandSetRank8
  1 = Command_PurchaseScienceAnthraxBomb
  2 = Command_PurchaseScienceSneakAttack
End

PlayerTemplate FactionGLADemolitionGeneral
  PurchaseScienceCommandSetRank1 = New_Demo_SCIENCE_GLA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Demo_SCIENCE_GLA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Demo_SCIENCE_GLA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Demo_SpecialPowerShortcutGLA
End

; Stealth ---------------------------------------------------------------------

CommandSet New_Slth_GLACommandCenterCommandSet
  1 = Slth_Command_ConstructGLAWorker
  4 = Slth_Command_GPSScrambler
  5 = Command_Ambush
  6 = Early_Command_EmergencyRepair
  7 = Command_AnthraxBomb
  8 = Command_SneakAttack
  12 = Command_UpgradeGLACamoNetting
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Slth_GLACommandCenter
  ; Apply new CommandSet
  CommandSet = New_Slth_GLACommandCenterCommandSet

  ; Give USA Radar upgrade which has no effect and trigger GrantScienceUpgrade on game start
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade01
      UpgradeToGrant = Upgrade_AmericaRadar
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End

  ; Restored Sniper unit exclusive to Stealth
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science01
      GrantScience = SCIENCE_Pathfinder
      TriggeredBy = Upgrade_AmericaRadar
    End
  End

  ; Stealth already started with Hijacker unlocked
  AddModule
    Behavior = GrantScienceUpgrade ModuleTag_Science02
      GrantScience = SCIENCE_Hijacker
      TriggeredBy = Upgrade_AmericaRadar
    End
  End
End

; No changes
CommandSet New_Slth_SpecialPowerShortcutGLA
  1 = Command_AmbushFromShortcut
; 1 = Chem_Command_AmbushFromShortcut
; 2 = Command_EmergencyRepairFromShortcut
  2 = Early_Command_EmergencyRepairFromShortcut
  3 = Command_AnthraxBombFromShortcut
  4 = Command_ScudStormFromShortcut
  5 = Command_RadarVanScanFromShortcut
  6 = Command_SneakAttackFromShortcut
; 7 = Command_GPSScramblerFromShortcut
  7 = Slth_Command_GPSScramblerFromShortcut
End

CommandSet New_Slth_SCIENCE_GLA_CommandSetRank1
  1 = Command_PurchaseScienceTechnicalTraining
  4 = Early_Command_PurchaseScienceEmergencyRepair1
End

CommandSet New_Slth_SCIENCE_GLA_CommandSetRank3
  1 = Slth_Command_PurchaseScienceGPSScrambler
  4 = Command_PurchaseScienceRebelAmbush1
  5 = Command_PurchaseScienceRebelAmbush2
  6 = Command_PurchaseScienceRebelAmbush3
  7 = Command_PurchaseScienceCashBounty1
  8 = Command_PurchaseScienceCashBounty2
  9 = Command_PurchaseScienceCashBounty3
  10 = Early_Command_PurchaseScienceEmergencyRepair2
  11 = Early_Command_PurchaseScienceEmergencyRepair3
End

CommandSet New_Slth_SCIENCE_GLA_CommandSetRank8
  1 = Command_PurchaseScienceAnthraxBomb
  2 = Command_PurchaseScienceSneakAttack
  4 = Command_PurchaseScienceHijacker
End

PlayerTemplate FactionGLAStealthGeneral
  PurchaseScienceCommandSetRank1 = New_Slth_SCIENCE_GLA_CommandSetRank1
  PurchaseScienceCommandSetRank3 = New_Slth_SCIENCE_GLA_CommandSetRank3
  PurchaseScienceCommandSetRank8 = New_Slth_SCIENCE_GLA_CommandSetRank8
  SpecialPowerShortcutCommandSet = New_Slth_SpecialPowerShortcutGLA
End

; -----------------------------------------------------------------------------
; Fix Composite Armor tooltip and unit inconsistencies
; -----------------------------------------------------------------------------

; Correct tooltip and properly explain what the upgrade does
CommandButton Command_UpgradeAmericaCompositeArmor
  Command = PLAYER_UPGRADE
  Upgrade = Upgrade_AmericaCompositeArmor
  TextLabel = New_UpgradeCompositeArmor
  ButtonImage = SSCompositeArmor
  ButtonBorderType = UPGRADE
  DescriptLabel = New_TooltipUpgradeCompositeArmor
End

; USA -------------------------------------------------------------------------

; No changes, need a new CommandSet to apply CommandButton changes
CommandSet New_AmericaStrategyCenterCommandSet
  1 = Command_InitiateBattlePlanBombardment
  2 = Command_CIAIntelligence
  3 = Command_InitiateBattlePlanHoldTheLine
  5 = Command_InitiateBattlePlanSearchAndDestroy
  6 = Command_UpgradeAmericaChemicalSuits
  7 = Command_UpgradeAmericaMOAB
  8 = Command_UpgradeAmericaCompositeArmor
  9 = Command_UpgradeAmericaAdvancedTraining
 10 = Command_UpgradeAmericaDroneArmor
 11 = Command_StrategyCenter_Stop
 13 = Command_UpgradeAmericaSupplyLines
 14 = Command_Sell
End

; Apply new CommandSet
Object AmericaStrategyCenter
  CommandSet = New_AmericaStrategyCenterCommandSet
End

; USA Crusader has MaxHealthUpgrade defined twice, for a total of 200 health
Object AmericaTankCrusader
  RemoveModule ModuleTag_09
  RemoveModule ModuleTag_18

  AddModule
    Behavior = MaxHealthUpgrade ModuleTag_09
      TriggeredBy = Upgrade_AmericaCompositeArmor
      AddMaxHealth = 200.0
      ChangeType = ADD_CURRENT_HEALTH_TOO
    End
  End
End

; Super Weapon ----------------------------------------------------------------

; Super Weapon Crusader was the only instance that didn't benefit from Composite Armor twice
; Not available normally
Object SupW_AmericaTankCrusader
  RemoveModule ModuleTag_09

  AddModule
    Behavior = MaxHealthUpgrade ModuleTag_09
      TriggeredBy = Upgrade_AmericaCompositeArmor
      AddMaxHealth = 200.0
      ChangeType = ADD_CURRENT_HEALTH_TOO
    End
  End
End

; Super Weapon Paladin upgrades were misspelled and in the wrong order
; Not available normally
Object SupW_AmericaTankPaladin
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaCompositeArmor
End

; Super Weapon Avenger was missing CANNOT_RETALIATE KindOf
; Super Weapon Avenger still had the Composite Armor upgrade health bonus which was removed from the USA Avenger
Object SupW_AmericaTankAvenger
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE

  RemoveModule ModuleTag_23
End

; Super Weapon Microwave Tank was using the wrong movement sounds
Object SupW_AmericaTankMicrowave
  SoundMoveStart = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart
End

; Laser -----------------------------------------------------------------------

; No changes, need a new CommandSet to apply CommandButton changes
CommandSet New_Lazr_AmericaStrategyCenterCommandSet
  1 = Command_InitiateBattlePlanBombardment
  2 = Command_CIAIntelligence
  3 = Command_InitiateBattlePlanHoldTheLine
  5 = Command_InitiateBattlePlanSearchAndDestroy
  6 = Command_UpgradeAmericaChemicalSuits
  7 = Command_UpgradeAmericaMOAB
  8 = Command_UpgradeAmericaCompositeArmor
  9 = Command_UpgradeAmericaAdvancedTraining
 10 = Command_UpgradeAmericaDroneArmor
 11 = Command_StrategyCenter_Stop
 13 = Command_UpgradeAmericaSupplyLines
 14 = Command_Sell
End

; Apply new CommandSet
Object Lazr_AmericaStrategyCenter
  CommandSet = New_Lazr_AmericaStrategyCenterCommandSet
End

; Laser Paladin upgrades were misspelled and in the wrong order
; Laser Paladin was using the wrong weapon
; Laser Paladin wasn't making use of the unique voice lines recorded for it
; Laser Paladin was missing POWERED KindOf
; Not available normally
Object Lazr_AmericaTankPaladin
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaCompositeArmor

  WeaponSet
    Conditions = None
    Weapon = PRIMARY Lazr_CrusaderTankGun
  End

  VoiceSelect = New_LaserPaladinVoiceSelect
  VoiceMove = PaladinTankVoiceMove
  VoiceGuard = PaladinTankVoiceMove
  VoiceAttack = New_LaserPaladinVoiceAttack
  SoundMoveStart = PaladinTankMoveStart
  SoundMoveStartDamaged = PaladinTankMoveStart
  UnitSpecificSounds
    VoiceCreate = New_LaserPaladinVoiceCreate
    TurretMoveLoop = TurretMoveLoop
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = PaladinTankVoiceCrush
    VoiceEnter = PaladinTankVoiceMove
  End

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE POWERED
End

; Laser Avenger was missing CANNOT_RETALIATE KindOf
; Laser Avenger still had the Composite Armor upgrade health bonus which was removed from the USA Avenger
Object Lazr_AmericaTankAvenger
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE

  RemoveModule ModuleTag_23
End

; Laser Microwave Tank was using the wrong movement sounds
Object Lazr_AmericaTankMicrowave
  SoundMoveStart = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart
End

; Air Force -------------------------------------------------------------------

; No changes, need a new CommandSet to apply CommandButton changes
CommandSet New_AirF_AmericaStrategyCenterCommandSet
  1 = Command_InitiateBattlePlanBombardment
  2 = Command_CIAIntelligence
  3 = Command_InitiateBattlePlanHoldTheLine
  5 = Command_InitiateBattlePlanSearchAndDestroy
  6 = Command_UpgradeAmericaChemicalSuits
  7 = Command_UpgradeAmericaMOAB
; 8 = Command_UpgradeAmericaCompositeArmor
  9 = Command_UpgradeAmericaAdvancedTraining
 10 = Command_UpgradeAmericaDroneArmor
 11 = Command_StrategyCenter_Stop
 12 = AirF_Command_CarpetBomb
 13 = Command_UpgradeAmericaSupplyLines
 14 = Command_Sell
End

; Apply new CommandSet
Object AirF_AmericaStrategyCenter
  CommandSet = New_AirF_AmericaStrategyCenterCommandSet
End

; Air Force Avenger incorrectly used AntiAirVehicle instead of AvengerArmor
; Air Force Avenger was the only instance that required a Strategy Center
; Air Force Avenger was missing CANNOT_RETALIATE KindOf
; Air Force Avenger still had the Composite Armor upgrade health bonus which was removed from the USA Avenger
Object AirF_AmericaTankAvenger
  ArmorSet
    Conditions = None
    Armor = AvengerArmor
    DamageFX = TankDamageFX
  End

  Prerequisites
    Object = AirF_AmericaWarFactory
  End

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE

  RemoveModule ModuleTag_23
End

; Air Force Microwave Tank was using the wrong movement sounds
Object AirF_AmericaTankMicrowave
  SoundMoveStart = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart
End

; -----------------------------------------------------------------------------
; Nuke general gets access to Uranium Shells & Nuclear Tanks (which they should've started with based on their Battlemaster)
; -----------------------------------------------------------------------------

; Nuke general should start with Nuclear Tanks unlocked
; Weapons Grade Uranium Shells starts unlocked for Nuke general but can also be researched later
; Fusion Reactors is used as a marker to detect if a player started as Nuke and cannot be researched
Object Nuke_ChinaCommandCenter
  ; Give Nuclear Tanks
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade02
      UpgradeToGrant = Upgrade_ChinaNuclearTanks
    End
  End

  ; Give Weapons Grade Uranium Shells
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade03
      UpgradeToGrant = Nuke_Upgrade_ChinaWGUraniumShells
    End
  End

  ; Give Fusion Reactors
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade04
      UpgradeToGrant = Nuke_Upgrade_ChinaFusionReactors
    End
  End
End

CommandButton Nuke_Command_UpgradeChinaWGUraniumShells
  Command = PLAYER_UPGRADE
  Upgrade = Nuke_Upgrade_ChinaWGUraniumShells
  Options = IGNORES_UNDERPOWERED
  TextLabel = New_UpgradeWGUraniumShells
  ButtonImage = SNUrShells
  ButtonBorderType = UPGRADE
  DescriptLabel = New_TooltipUpgradeWGUraniumShells
End

CommandSet New_Nuke_ChinaNuclearMissileCommandSet
  1 = Nuke_Command_NeutronMissile
  7 = Command_UpgradeChinaUraniumShells
  8 = Command_UpgradeChinaNuclearTanks
  9 = Nuke_Command_UpgradeChinaWGUraniumShells
  10 = Command_UpgradeChinaNeutronShells
  11 = Command_UpgradeChinaTacticalNukeMig
  12 = Command_UpgradeChinaMines
  14 = Command_Sell
End

CommandSet New_Nuke_ChinaNuclearMissileCommandSetUpgrade
  1 = Nuke_Command_NeutronMissile
  7 = Command_UpgradeChinaUraniumShells
  8 = Command_UpgradeChinaNuclearTanks
  9 = Nuke_Command_UpgradeChinaWGUraniumShells
  10 = Command_UpgradeChinaNeutronShells
  11 = Command_UpgradeChinaTacticalNukeMig
  12 = Command_UpgradeEMPMines
  14 = Command_Sell
End

Object Nuke_ChinaNuclearMissileLauncher
  CommandSet = New_Nuke_ChinaNuclearMissileCommandSet

  RemoveModule ModuleTag_25

  AddModule
    Behavior = CommandSetUpgrade ModuleTag_25
      CommandSet = New_Nuke_ChinaNuclearMissileCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End
End

; Show Fusion Reactors upgrade on Advanced Nuclear Reactors
Object Nuke_ChinaPowerPlant
  UpgradeCameo1 = Nuke_Upgrade_ChinaFusionReactors
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE
End

; Nuke Battlemaster was the only instance that didn't benefit from Uranium Shells (instead looking for the previously cut Weapons Grade Uranium Shells)
; Captured Nuke Battlemaster shouldn't get nuclear spill matching the behavior of Toxin Shells
Object Nuke_BattleMasterTankShell
  ; Damage boost from Uranium Shells
  RemoveModule ModuleTag_06
  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_06
      TriggeredBy = Upgrade_ChinaUraniumShells
    End
  End

  ; Nuke general always has nuclear spill, others need to research Weapons Grade Uranium Shells
  RemoveModule ModuleTag_07
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
      DeathWeapon = Nuke_NukeShellWeapon
      StartsActive = No
      TriggeredBy = Nuke_Upgrade_ChinaWGUraniumShells
    End
  End
End

AudioEvent New_BattleMasterTankVoiceMove
  Sounds = vbatmoa vbatmob vbatmoc vbatmod vbatmoe vbatmof vbatu4a
  Control = random
  Volume = 90
  Type = ui voice player
End

AudioEvent New_BattleMasterTankVoiceEnter
  Sounds = vbatmoa vbatmob vbatmoc vbatmod vbatmoe vbatmof vbatu4c
  Control = random
  Volume = 90
  Type = ui voice player
End

MappedImage SUComBike_L
  Texture = SNUserInterface512_003.tga
  TextureWidth = 512
  TextureHeight = 512
  Coords = Left:123 Top:1 Right:243 Bottom:97
  Status = NONE
End

Object Nuke_ChinaTankBattleMaster
  SelectPortrait = SUComBike_L
  ButtonImage = SUComBike_L

  UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo2 = Upgrade_ChinaUraniumShells
  UpgradeCameo3 = Upgrade_ChinaNuclearTanks
  UpgradeCameo4 = Upgrade_ChinaIsotopeStability
  UpgradeCameo5 = Nuke_Upgrade_ChinaWGUraniumShells

  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = New_BattleMasterTankVoiceMove
  VoiceGuard = New_BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    VoiceCreate = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = New_BattleMasterTankVoiceEnter
  End

  Locomotor = SET_NORMAL BattleMasterLocomotor
  Locomotor = SET_NORMAL_UPGRADED Nuke_FusionBattleMasterLocomotor

  RemoveModule ModuleTag_06

  ; Explode with Nuclear Tanks
  ; Stop exploding with Isotope Stability or Fusion Reactors
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_06
      DeathWeapon = NuclearTankDeathWeapon
      StartsActive = No
      TriggeredBy = Upgrade_ChinaNuclearTanks
      ConflictsWith = Upgrade_ChinaIsotopeStability Nuke_Upgrade_ChinaFusionReactors
    End
  End

  ; Larger explosion with Fusion Reactors
  ; Stop exploding with Isotope Stability
  AddModule
    Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
      DeathWeapon = Nuke_NuclearTankDeathWeapon
      StartsActive = No
      TriggeredBy = Nuke_Upgrade_ChinaFusionReactors
      ConflictsWith = Upgrade_ChinaIsotopeStability
    End
  End

  AddModule
    Behavior = LocomotorSetUpgrade ModuleTag_14
      TriggeredBy = Upgrade_ChinaNuclearTanks
    End
  End

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_15
      TriggeredBy = Upgrade_ChinaUraniumShells
    End
  End
End

; Rename to Nuclear Battlemaster to make it clearer it's a different unit
CommandButton Demo_Command_ConstructGLAVehicleCombatBike
  Command = UNIT_BUILD
  Object = Nuke_ChinaTankBattleMaster
  TextLabel = New_ConstructNuclearBattlemaster
  ButtonImage = SUComBike_L
  ButtonBorderType = BUILD
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildBattlemaster
End

; No changes, need a new CommandSet to apply CommandButton changes
CommandSet New_Nuke_ChinaWarFactoryCommandSet
  1 = Demo_Command_ConstructGLAVehicleCombatBike
  2 = Nuke_Command_ConstructChinaTankOverlord
  3 = Nuke_Command_ConstructChinaVehicleTroopCrawler
  4 = Nuke_Command_ConstructChinaVehicleListeningOutpost
  5 = Nuke_Command_ConstructChinaTankGattling
  6 = Command_UpgradeChinaChainGuns
  7 = Nuke_Command_ConstructChinaTankDragon
  8 = Command_UpgradeChinaBlackNapalm
  9 = Nuke_Command_ConstructChinaVehicleInfernoCannon
  10 = Nuke_Command_ConstructChinaVehicleNukeLauncher
  11 = Nuke_Command_ConstructChinaTankECM
  12 = Command_UpgradeChinaMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; No changes, need a new CommandSet to apply CommandButton changes
CommandSet New_Nuke_ChinaWarFactoryCommandSetUpgrade
  1 = Demo_Command_ConstructGLAVehicleCombatBike
  2 = Nuke_Command_ConstructChinaTankOverlord
  3 = Nuke_Command_ConstructChinaVehicleTroopCrawler
  4 = Nuke_Command_ConstructChinaVehicleListeningOutpost
  5 = Nuke_Command_ConstructChinaTankGattling
  6 = Command_UpgradeChinaChainGuns
  7 = Nuke_Command_ConstructChinaTankDragon
  8 = Command_UpgradeChinaBlackNapalm
  9 = Nuke_Command_ConstructChinaVehicleInfernoCannon
  10 = Nuke_Command_ConstructChinaVehicleNukeLauncher
  11 = Nuke_Command_ConstructChinaTankECM
  12 = Command_UpgradeEMPMines
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

; Apply new CommandSet
Object Nuke_ChinaWarFactory
  CommandSet = New_Nuke_ChinaWarFactoryCommandSet

  RemoveModule ModuleTag_25

  AddModule
    Behavior = CommandSetUpgrade ModuleTag_25
      CommandSet = New_Nuke_ChinaWarFactoryCommandSetUpgrade
      TriggeredBy = Upgrade_ChinaMines
    End
  End
End

; -----------------------------------------------------------------------------
; Consistent Palace buttons
; -----------------------------------------------------------------------------

; GLA -------------------------------------------------------------------------

; No changes
CommandSet New_GLAPalaceCommandSet
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
  9 = Command_UpgradeGLACamouflage
  10 = Command_UpgradeGLAToxinShells
  11 = Command_UpgradeGLAAnthraxBeta
; 11 = Chem_Command_UpgradeGLAAnthraxGamma
; 12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Apply new CommandSet
Object GLAPalace
  CommandSet = New_GLAPalaceCommandSet
End

; Toxin -----------------------------------------------------------------------

; No changes
CommandSet New_Chem_GLAPalaceCommandSet
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
; 9 = Command_UpgradeGLACamouflage
; 10 = Command_UpgradeGLAToxinShells
; 11 = Command_UpgradeGLAAnthraxBeta
  11 = Chem_Command_UpgradeGLAAnthraxGamma
; 12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Apply new CommandSet
Object Chem_GLAPalace
  CommandSet = New_Chem_GLAPalaceCommandSet
End

; Demo ------------------------------------------------------------------------

; No changes
CommandSet New_Demo_GLAPalaceCommandSet
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
; 9 = Command_UpgradeGLACamouflage
; 10 = Command_UpgradeGLAToxinShells
; 11 = Command_UpgradeGLAAnthraxBeta
; 11 = Chem_Command_UpgradeGLAAnthraxGamma
; 12 = Command_UpgradeGLACamoNetting
  13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Apply new CommandSet
Object Demo_GLAPalace
  CommandSet = New_Demo_GLAPalaceCommandSet
End

; Stealth ---------------------------------------------------------------------

; No changes
CommandSet New_Slth_GLAPalaceCommandSet
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
; 9 = Command_UpgradeGLACamouflage
; 10 = Command_UpgradeGLAToxinShells
  11 = Command_UpgradeGLAAnthraxBeta
; 11 = Chem_Command_UpgradeGLAAnthraxGamma
  12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Apply new CommandSet
Object Slth_GLAPalace
  CommandSet = New_Slth_GLAPalaceCommandSet
End

; -----------------------------------------------------------------------------
; Toxin general gets access to Toxin Shells & Anthrax Beta (which they already started with)
; -----------------------------------------------------------------------------

; Toxin general gets access to Toxin Shells & Anthrax Beta which can be researched late
CommandSet New_Chem_GLAPalaceCommandSet
  10 = Command_UpgradeGLAToxinShells
  11 = Command_UpgradeGLAAnthraxBeta
End

; Anthrax Gamma can be researched after Anthrax Beta
CommandSet New_Chem_GLAPalaceCommandSetUpgrade
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
; 9 = Command_UpgradeGLACamouflage
  10 = Command_UpgradeGLAToxinShells
; 11 = Command_UpgradeGLAAnthraxBeta
  11 = Chem_Command_UpgradeGLAAnthraxGamma
; 12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Anthrax Beta button becomes Anthrax Gamma when the former is researched
Object Chem_GLAPalace
  ; Apply CommandSetUpgrade
  AddModule
    Behavior = CommandSetUpgrade ModuleTag_13
      CommandSet = New_Chem_GLAPalaceCommandSetUpgrade
      TriggeredBy = Upgrade_GLAAnthraxBeta
    End
  End
End

; -----------------------------------------------------------------------------
; Stealth general gets access to Camouflage (which they already started with)
; -----------------------------------------------------------------------------

CommandSet New_Slth_GLAPalaceCommandSetTwo
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
  9 = Command_UpgradeGLACamouflage
; 10 = Command_UpgradeGLAToxinShells
  11 = Command_UpgradeGLAAnthraxBeta
; 11 = Chem_Command_UpgradeGLAAnthraxGamma
  12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  14 = Command_Sell
End

; Apply new CommandSet
Object Slth_GLAPalace
  CommandSet = New_Slth_GLAPalaceCommandSetTwo
End

Object Slth_GLACommandCenter
  AddModule
    Behavior = GrantUpgradeCreate ModuleTag_Upgrade02
      UpgradeToGrant = Upgrade_GLACamouflage
    End
  End
End

Object Slth_GLAInfantryRebel
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLACamouflage
  UpgradeCameo3 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  ; Stealth Rebel was the only instance that was revealed on taking damage
  RemoveModule ModuleTag_07
  AddModule
  Behavior = StealthUpdate ModuleTag_07
      StealthDelay = 2500
      StealthForbiddenConditions = ATTACKING USING_ABILITY
      MoveThresholdSpeed = 3
      InnateStealth = No
      OrderIdleEnemiesToAttackMeUponReveal = Yes
    End
  End

  RemoveModule ModuleTag_10
  AddModule
    Behavior = StealthUpgrade ModuleTag_10
      TriggeredBy = Upgrade_GLACamouflage
    End
  End
End

; -----------------------------------------------------------------------------
; Stealth Scud Storm doesn't get the Camo Netting upgrade
;
; Reasoning:
; Super weapons start revealed on the map and players can simply remember where
; this was built (or place a beacon) to render this upgrade pointless. What's
; left is a gotcha for distracted players and finicky targeting mechanics. This
; change also reduces the mental stack players need to contend with allowing
; players to focus more on skill expression in macro and micro.
; -----------------------------------------------------------------------------

CommandSet New_Slth_GLAScudStormCommandSet
  1 = Command_ScudStorm
; 12 = Command_UpgradeGLACamoNetting
  14 = Command_Sell
End

Object Slth_GLAScudStorm
  UpgradeCameo1 = NONE
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  CommandSet = New_Slth_GLAScudStormCommandSet

  RemoveModule ModuleStealth_09
  RemoveModule ModuleTag_20
  RemoveModule ModuleTag_21
End

; -----------------------------------------------------------------------------
; Restore Stealth general's Quad Cannon Sniper Rounds
; -----------------------------------------------------------------------------

CommandSet New_Slth_GLAPalaceCommandSetTwo
  1 = Command_StructureExit
  2 = Command_StructureExit
  3 = Command_StructureExit
  4 = Command_StructureExit
  5 = Command_StructureExit
  6 = Command_Evacuate
  7 = Command_UpgradeGLAFortifiedStructure
  8 = Command_UpgradeGLAArmTheMob
; 9 = Command_UpgradeGLACamouflage
; 10 = Command_UpgradeGLAToxinShells
  11 = Command_UpgradeGLAAnthraxBeta
; 11 = Chem_Command_UpgradeGLAAnthraxGamma
  12 = Command_UpgradeGLACamoNetting
; 13 = Demo_UpgradeSuicideBomb
  13 = GC_Slth_Command_UpgradeGLAQuadCannonSnipeGun
  14 = Command_Sell
End

; Apply new CommandSet
Object Slth_GLAPalace
  CommandSet = New_Slth_GLAPalaceCommandSetTwo
End

CommandSet New_Slth_GLAVehicleQuadCannon
  1 = Command_GLAInfantryJarmenKellSnipeVehicleAttack
  11 = Command_AttackMove
  13 = Command_Guard
  14 = Command_Stop
End

Object Slth_GLAVehicleQuadCannon
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = GC_Slth_Upgrade_GLAQuadCannonSnipe
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  RemoveModule ModuleTag_01
  AddModule
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponRecoilBone = PRIMARY Barrel
      WeaponFireFXBone = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone = SECONDARY Barrel
      WeaponFireFXBone = TERTIARY BarrelMS
      WeaponMuzzleFlash = TERTIARY BarrelFX
      WeaponRecoilBone = TERTIARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponRecoilBone = PRIMARY Barrel
      WeaponFireFXBone = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone = SECONDARY Barrel
      WeaponFireFXBone = TERTIARY BarrelMS
      WeaponMuzzleFlash = TERTIARY BarrelFX
      WeaponRecoilBone = TERTIARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = RUBBLE
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponRecoilBone = PRIMARY Barrel
      WeaponFireFXBone = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone = SECONDARY Barrel
      WeaponFireFXBone = TERTIARY BarrelMS
      WeaponMuzzleFlash = TERTIARY BarrelFX
      WeaponRecoilBone = TERTIARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponFireFXBone = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone = SECONDARY BarrelUp01
      WeaponFireFXBone = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponFireFXBone = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone = SECONDARY BarrelUp01
      WeaponFireFXBone = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponFireFXBone = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone = SECONDARY BarrelUp01
      WeaponFireFXBone = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponFireFXBone = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone = SECONDARY BarrelUp02
      WeaponFireFXBone = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponFireFXBone = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone = SECONDARY BarrelUp02
      WeaponFireFXBone = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponFireFXBone = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone = SECONDARY BarrelUp02
      WeaponFireFXBone = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 2.0
    TreadDriveSpeedFraction = 0.3
    TreadPivotSpeedFraction = 0.6

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2
    PowerslideRotationAddition = 0
  End
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGunUpgradeOne
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGunUpgradeTwo
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGunUpgradeOne
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGunUpgradeTwo
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = VETERAN
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = VETERAN CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = VETERAN CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
  End
  WeaponSet
    Conditions = VETERAN PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = VETERAN CRATEUPGRADE_ONE PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = VETERAN CRATEUPGRADE_TWO PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = ELITE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = ELITE CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = ELITE CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
  End
  WeaponSet
    Conditions = ELITE PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = ELITE CRATEUPGRADE_ONE PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = ELITE CRATEUPGRADE_TWO PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = HERO
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = HERO CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = HERO CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY None
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
  End
  WeaponSet
    Conditions = HERO PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = HERO CRATEUPGRADE_ONE PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeOneAir
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = HERO CRATEUPGRADE_TWO PLAYER_UPGRADE
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY GLAJarmenKellRifle
    Weapon = TERTIARY QuadCannonGunUpgradeTwoAir
    AutoChooseSources = SECONDARY NONE
  End

  CommandSet = New_Slth_GLAVehicleQuadCannon

  RemoveModule ModuleTag_03
  AddModule
    Behavior = AIUpdateInterface ModuleTag_03
      Turret
        TurretTurnRate = 360
        TurretPitchRate = 360
        AllowsPitch = Yes
        ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      End
      AutoAcquireEnemiesWhenIdle = Yes Stealthed
      MoodAttackCheckRate = 250
    End
  End
  Locomotor = SET_NORMAL QuadCannonLocomotor

  AddModule
    Behavior = CommandButtonHuntUpdate ModuleTag_14
    End
  End

  AddModule
    Behavior = WeaponSetUpgrade ModuleTag_15
      TriggeredBy = GC_Slth_Upgrade_GLAQuadCannonSnipe
    End
  End
End

; -----------------------------------------------------------------------------
; Restore Super Weapon general's Crusader & Paladin
;
; Composite Armor has intentionally not been made available.
;
; As an exception to the rule, composite armor should be visible on supported
; units matching the behavior of Super Weapon general's Microwave Tank.
; -----------------------------------------------------------------------------

CommandSet New_SupW_SCIENCE_AMERICA_CommandSetRank3
  2 = Command_PurchaseSciencePaladinTank
End

CommandSet New_SupW_AmericaWarFactoryCommandSet
  1 = SupW_Command_ConstructAmericaTankCrusader
  2 = SupW_Command_ConstructAmericaVehicleTomahawk
  3 = SupW_Command_ConstructAmericaVehicleHumvee
  4 = SupW_Command_ConstructAmericaVehicleMedic
  5 = SupW_Command_ConstructAmericaTankPaladin
  6 = SupW_Command_ConstructAmericaVehicleSentryDrone
  7 = SupW_Command_ConstructAmericaVehicleAvenger
  8 = SupW_Command_ConstructAmericaVehicleMicrowave
  9 = Command_UpgradeAmericaSentryDroneGun
  11 = Command_UpgradeAmericaTOWMissile
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object SupW_AmericaWarFactory
  CommandSet = New_SupW_AmericaWarFactoryCommandSet
End

; -----------------------------------------------------------------------------
; Restore Laser general's Paladin
; -----------------------------------------------------------------------------

CommandSet New_Lazr_SCIENCE_AMERICA_CommandSetRank3
  2 = Command_PurchaseSciencePaladinTank
End

AudioEvent New_LaserPaladinVoiceAttack
  Sounds = vpalata vpalatb vpalatc vpalatd vpalate vpllata vpllatb vpllatc ; vpalatf is a duplicate of vpalseb
  Control = random
  Volume = 90
  Type = ui voice player
End

AudioEvent New_LaserPaladinVoiceSelect
  Sounds = vpalsea vpalseb vpalsec vpalsed vpalsee vpalsef vpllseb vpllsec vpllsed
  Control = random
  Volume = 90
  Type = ui voice player
End

AudioEvent New_LaserPaladinVoiceCreate
  Sounds = vpllsea
  Control = random
  Volume = 110
  MinVolume = 100
  Priority = high
  Type = world global player
End

CommandButton Lazr_Command_ConstructAmericaTankCrusader
  Command = UNIT_BUILD
  Object = Lazr_AmericaTankCrusader
  TextLabel = CONTROLBAR:Lazr_ConstructAmericaTankCrusader
  ButtonImage = SALsrTank
  ButtonBorderType = BUILD
  DescriptLabel = New_Lazr_ToolTipBuildCrusader
End

CommandButton Lazr_Command_ConstructAmericaVehiclePaladin
  Command = UNIT_BUILD
  Object = Lazr_AmericaTankPaladin
  TextLabel = New_ConstructLaserPaladin
  ButtonImage = SAPaladin
  ButtonBorderType = BUILD
  DescriptLabel = New_ToolTipBuildLaserPaladin
End

CommandSet New_Lazr_AmericaWarFactoryCommandSet
  1 = Lazr_Command_ConstructAmericaTankCrusader
  3 = Lazr_Command_ConstructAmericaVehicleHumvee
  4 = Lazr_Command_ConstructAmericaVehicleMedic
  5 = Lazr_Command_ConstructAmericaVehiclePaladin
  6 = Lazr_Command_ConstructAmericaVehicleSentryDrone
  7 = Lazr_Command_ConstructAmericaVehicleAvenger
  8 = Lazr_Command_ConstructAmericaVehicleMicrowave
  9 = Command_UpgradeAmericaSentryDroneGun
  11 = Command_UpgradeAmericaTOWMissile
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Lazr_AmericaWarFactory
  CommandSet = New_Lazr_AmericaWarFactoryCommandSet
End

; -----------------------------------------------------------------------------
; USA, Super Weapon, and Air Force gets Gattling Cannon
; -----------------------------------------------------------------------------

CommandButton Boss_Command_ConstructChinaGattlingCannon
  Command = DOZER_CONSTRUCT
  Object = Boss_GattlingCannon
  TextLabel = New_ConstructGattlingCannon
  ButtonImage = SNGatTower
  ButtonBorderType = BUILD
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildGattlingCannon
End

CommandSet New_ChinaGattlingCannonCommandSet
; 12 = Command_UpgradeChinaMines
 13 = Command_Stop
 14 = Command_Sell
End

Object Boss_GattlingCannon
  RemoveModule ModuleTag_02
  AddModule
  Draw = W3DModelDraw ModuleTag_02
    AnimationsRequirePower = No ; Do not pause the construction anims when low power disabled
    DefaultConditionState
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = NIGHT
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = SNOW
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = SNOW NIGHT
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = ABPatriot_A4
      Animation = ABPatriot_A4.ABPatriot_A4
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_DAY
    End
    ConditionState = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = ABPatriot_A4N
      Animation = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_NIGHT
    End
    ConditionState = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = ABPatriot_A4S
      Animation = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_SNOW
    End
    ConditionState = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = ABPatriot_A4SN
      Animation = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_SNOWNIGHT
    End
    TransitionState = DOWN_DEFAULT UP_DAY
      Model = ABPatriot_A4
      Animation = ABPatriot_A4.ABPatriot_A4
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_NIGHT
      Model = ABPatriot_A4N
      Animation = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOW
      Model = ABPatriot_A4S
      Animation = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOWNIGHT
      Model = ABPatriot_A4SN
      Animation = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = UP_DAY DOWN_DEFAULT
      Model = ABPatriot_A4
      Animation = ABPatriot_A4.ABPatriot_A4
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_NIGHT DOWN_DEFAULT
      Model = ABPatriot_A4N
      Animation = ABPatriot_A4N.ABPatriot_A4N
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_SNOW DOWN_DEFAULT
      Model = ABPatriot_A4S
      Animation = ABPatriot_A4S.ABPatriot_A4S
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_SNOWNIGHT DOWN_DEFAULT
      Model = ABPatriot_A4SN
      Animation = ABPatriot_A4SN.ABPatriot_A4SN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
  End
  End

  RemoveModule ModuleTag_03
  AddModule
  Draw = W3DModelDraw ModuleTag_03
    AnimationsRequirePower = No ; Do not pause the construction anims when low power disabled
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = NIGHT
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = SNOW
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = SNOW NIGHT
      Model = None
      TransitionKey = DOWN_DEFAULT
    End
    ConditionState = PARTIALLY_CONSTRUCTED
      Model = ABPatriot_A6
      Animation = ABPatriot_A6.ABPatriot_A6
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState = NIGHT PARTIALLY_CONSTRUCTED
      Model = ABPatriot_A6N
      Animation = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState = SNOW PARTIALLY_CONSTRUCTED
      Model = ABPatriot_A6S
      Animation = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    ConditionState = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model = ABPatriot_A6SN
      Animation = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
    End
    TransitionState = DOWN_DEFAULT UP_DAY
      Model = ABPatriot_A6
      Animation = ABPatriot_A6.ABPatriot_A6
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_NIGHT
      Model = ABPatriot_A6N
      Animation = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOW
      Model = ABPatriot_A6S
      Animation = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOWNIGHT
      Model = ABPatriot_A6SN
      Animation = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState = UP_DAY DOWN_DEFAULT
      Model = ABPatriot_A6
      Animation = ABPatriot_A6.ABPatriot_A6
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_NIGHT DOWN_DEFAULT
      Model = ABPatriot_A6N
      Animation = ABPatriot_A6N.ABPatriot_A6N
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_SNOW DOWN_DEFAULT
      Model = ABPatriot_A6S
      Animation = ABPatriot_A6S.ABPatriot_A6S
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState = UP_SNOWNIGHT DOWN_DEFAULT
      Model = ABPatriot_A6SN
      Animation = ABPatriot_A6SN.ABPatriot_A6SN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
  End
  End

  UpgradeCameo1 = NONE
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  Prerequisites
    Object = AmericaPowerPlant AirF_AmericaPowerPlant SupW_AmericaPowerPlant
    Science = SCIENCE_GattlingTankTraining
  End

  CommandSet = New_ChinaGattlingCannonCommandSet
  VoiceSelect = PatriotBatterySelect

  RemoveModule ModuleTag_04
  RemoveModule ModuleTag_07
  RemoveModule ModuleTag_10
  RemoveModule ModuleTag_15
  RemoveModule ModuleTag_25
  RemoveModule ModuleTag_26

  AddModule
    Behavior = BaseRegenerateUpdate ModuleTag_04
    End
  End

  AddModule
    Behavior = CreateObjectDie ModuleTag_SpawnRangers
      CreationList = OCL_AmericanRangerDebris03
      ExemptStatus = UNDER_CONSTRUCTION
    End
  End
End

Science SCIENCE_GattlingTankTraining
  PrerequisiteSciences = SCIENCE_CHINA SCIENCE_Rank1
  SciencePurchasePointCost = 1
  IsGrantable = Yes
  DisplayName = OBJECT:GattlingCannon
  Description = CONTROLBAR:ToolTipChinaBuildGattlingCannon
End

CommandButton Boss_Command_ConstructChinaGattlingCannon
  Command = PURCHASE_SCIENCE
  Science = SCIENCE_GattlingTankTraining
  Object = Boss_GattlingCannon
  TextLabel = CONTROLBAR:ConstructChinaGattlingCannon
  ButtonImage = SNGatTower
  ButtonBorderType = UPGRADE
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildGattlingCannon
End

MappedImage SCTempDefaultCommand
  Texture = SNUserInterface512_003.tga
  TextureWidth = 512
  TextureHeight = 512
  Coords = Left:311 Top:397 Right:371 Bottom:445
  Status = NONE
End

; USA -------------------------------------------------------------------------

CommandButton Command_CrateDrop
  Command = DOZER_CONSTRUCT
  SpecialPower = None
  Options = NONE
  Object = Boss_GattlingCannon
  TextLabel = CONTROLBAR:ConstructChinaGattlingCannon
  ButtonImage = SCTempDefaultCommand
  CursorName = None
  InvalidCursorName = None
  ButtonBorderType = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildGattlingCannon
End

CommandSet New_AmericaDozerCommandSet
  1 = Command_ConstructAmericaPowerPlant
  2 = Command_ConstructAmericaStrategyCenter
  3 = Command_ConstructAmericaBarracks
  4 = Command_ConstructAmericaSupplyDropZone
  5 = Command_ConstructAmericaSupplyCenter
  6 = Command_ConstructAmericaParticleCannonUplink
  7 = Command_ConstructAmericaPatriotBattery
  8 = Command_ConstructAmericaCommandCenter
  9 = Command_ConstructAmericaFireBase
  10 = Command_CrateDrop
  11 = Command_ConstructAmericaWarFactory
  13 = Command_ConstructAmericaAirfield
  14 = Command_DisarmMinesAtPosition
End

Object AmericaVehicleDozer
  CommandSet = New_AmericaDozerCommandSet
End

CommandSet New_SCIENCE_AMERICA_CommandSetRank1
  1 = Command_PurchaseScienceSpyDrone
  2 = Command_PurchaseScienceStealthFighter
  3 = Boss_Command_ConstructChinaGattlingCannon
End

CommandSet New_SCIENCE_AMERICA_CommandSetRank8
  4 = Command_PurchaseSciencePaladinTank
End

PlayerTemplate FactionAmerica
  IntrinsicSciences = SCIENCE_AMERICA SCIENCE_CHINA
End

; Super Weapon ----------------------------------------------------------------

CommandButton Command_CrateDropFromShortcut
  Command = DOZER_CONSTRUCT
  SpecialPower = None
  Options = NONE
  Object = Boss_GattlingCannon
  TextLabel = CONTROLBAR:ConstructChinaGattlingCannon
  ButtonImage = SCTempDefaultCommand
  CursorName = None
  InvalidCursorName = None
  ButtonBorderType = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildGattlingCannon
End

CommandSet New_SupW_AmericaDozerCommandSet
  1 = SupW_Command_ConstructAmericaPowerPlant
  2 = SupW_Command_ConstructAmericaStrategyCenter
  3 = SupW_Command_ConstructAmericaBarracks
  4 = SupW_Command_ConstructAmericaSupplyDropZone
  5 = SupW_Command_ConstructAmericaSupplyCenter
  6 = SupW_Command_ConstructAmericaParticleCannonUplink
  7 = SupW_Command_ConstructAmericaPatriotBattery
  8 = SupW_Command_ConstructAmericaCommandCenter
  9 = SupW_Command_ConstructAmericaFireBase
  10 = Command_CrateDropFromShortcut
  11 = SupW_Command_ConstructAmericaWarFactory
  13 = SupW_Command_ConstructAmericaAirfield
  14 = Command_DisarmMinesAtPosition
End

Object SupW_AmericaVehicleDozer
  CommandSet = New_SupW_AmericaDozerCommandSet
End

CommandSet New_SupW_SCIENCE_AMERICA_CommandSetRank1
  3 = Boss_Command_ConstructChinaGattlingCannon
End

PlayerTemplate FactionAmericaSuperWeaponGeneral
  IntrinsicSciences = SCIENCE_AMERICA SCIENCE_CHINA
End

; Air Force -------------------------------------------------------------------

CommandButton Command_TerrorCell
  Command = DOZER_CONSTRUCT
  SpecialPower = None
  Options = NONE
  Object = Boss_GattlingCannon
  TextLabel = CONTROLBAR:ConstructChinaGattlingCannon
  ButtonImage = SCTempDefaultCommand
  ButtonBorderType = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel = CONTROLBAR:ToolTipChinaBuildGattlingCannon
  RadiusCursorType = NONE
  InvalidCursorName = None
End

CommandSet New_AirF_AmericaDozerCommandSet
  1 = AirF_Command_ConstructAmericaPowerPlant
  2 = AirF_Command_ConstructAmericaStrategyCenter
  3 = AirF_Command_ConstructAmericaBarracks
  4 = AirF_Command_ConstructAmericaSupplyDropZone
  5 = AirF_Command_ConstructAmericaSupplyCenter
  6 = AirF_Command_ConstructAmericaParticleCannonUplink
  7 = AirF_Command_ConstructAmericaPatriotBattery
  8 = AirF_Command_ConstructAmericaCommandCenter
  9 = AirF_Command_ConstructAmericaFireBase
  10 = Command_TerrorCell
  11 = AirF_Command_ConstructAmericaWarFactory
  13 = AirF_Command_ConstructAmericaAirfield
  14 = Command_DisarmMinesAtPosition
End

Object AirF_AmericaVehicleDozer
  CommandSet = New_AirF_AmericaDozerCommandSet
End

CommandSet New_AirF_SCIENCE_AMERICA_CommandSetRank1
  3 = Boss_Command_ConstructChinaGattlingCannon
End

PlayerTemplate FactionAmericaAirForceGeneral
  IntrinsicSciences = SCIENCE_AMERICA SCIENCE_CHINA
End

; -----------------------------------------------------------------------------
; Emergency Repair reveals a small part of the map
; -----------------------------------------------------------------------------

SpecialPower SuperweaponEmergencyRepair
  Enum = SPECIAL_REPAIR_VEHICLES
  ReloadTime = 240000
  RequiredScience = SCIENCE_EmergencyRepair1
  PublicTimer = No
  SharedSyncedTimer = Yes
  ViewObjectDuration = 30000
  ViewObjectRange = 100
  RadiusCursorRadius = 100
  InitiateAtLocationSound = EmergencyRepairActivate
  ShortcutPower = Yes
  AcademyClassify = ACT_SUPERPOWER
End

SpecialPower Early_SuperweaponEmergencyRepair
  Enum = EARLY_SPECIAL_REPAIR_VEHICLES
  ReloadTime = 240000
  RequiredScience = Early_SCIENCE_EmergencyRepair1
  PublicTimer = No
  SharedSyncedTimer = Yes
  ViewObjectDuration = 30000
  ViewObjectRange = 100
  RadiusCursorRadius = 100
  InitiateAtLocationSound = EmergencyRepairActivate
  ShortcutPower = Yes
  AcademyClassify = ACT_SUPERPOWER
End

; -----------------------------------------------------------------------------
; Strategy Center is revealed on the map
; -----------------------------------------------------------------------------

Object AmericaStrategyCenter
  ShroudRevealToAllRange = 0.00000000000000000000000000000000000000000001
End

Object SupW_AmericaStrategyCenter
  ShroudRevealToAllRange = 0.00000000000000000000000000000000000000000001
End

Object Lazr_AmericaStrategyCenter
  ShroudRevealToAllRange = 0.00000000000000000000000000000000000000000001
End

Object AirF_AmericaStrategyCenter
  ShroudRevealToAllRange = 0.00000000000000000000000000000000000000000001
End

; -----------------------------------------------------------------------------
; Restore Stealth general's Sniper
; -----------------------------------------------------------------------------

CommandButton Boss_Command_ConstructAmericaInfantryPathfinder
  Command = PURCHASE_SCIENCE
  Science = SCIENCE_Pathfinder
  Object = GC_Slth_GLAInfantrySniper
  ButtonImage = SAPathfinder1
  ButtonBorderType = UPGRADE
End

CommandSet New_Slth_SCIENCE_GLA_CommandSetRank8
  3 = Command_PurchaseScienceHijacker
  4 = Boss_Command_ConstructAmericaInfantryPathfinder
End

PlayerTemplate FactionGLAStealthGeneral
  IntrinsicSciences = SCIENCE_GLA SCIENCE_AMERICA
End

CommandButton GC_Slth_Command_ConstructGLAInfantrySniper
  Command = UNIT_BUILD
  Object = GC_Slth_GLAInfantrySniper
  TextLabel = New_ConstructInfantrySniper
  ButtonImage = SAPathfinder1
  ButtonBorderType = BUILD
  DescriptLabel = CONTROLBAR:ToolTipGLABuildSniper
End

CommandSet New_Slth_GLABarracksCommandSet
  1 = Slth_Command_ConstructGLAInfantryRebel
  2 = Slth_Command_ConstructGLAInfantryRPGTrooper
  3 = Slth_Command_ConstructGLAInfantryTerrorist
  4 = Slth_Command_ConstructGLAInfantryAngryMob
  5 = Slth_Command_ConstructGLAInfantryHijacker
  6 = Slth_Command_ConstructGLAInfantryJarmenKell
  7 = Slth_Command_ConstructGLAInfantrySaboteur
  8 = GC_Slth_Command_ConstructGLAInfantrySniper
  11 = Command_UpgradeGLARebelCaptureBuilding
  12 = Command_UpgradeGLACamoNetting
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object Slth_GLABarracks
  CommandSet = New_Slth_GLABarracksCommandSet
End

; Sniper was missing CANNOT_RETALIATE KindOf
Object GC_Slth_GLAInfantrySniper
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = NONE
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  ; Add CANNOT_RETALIATE
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY STEALTH_GARRISON SCORE CANNOT_RETALIATE

  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End

  ; Remove Advanced Training experience increase
  RemoveModule ModuleTag_05

  AddModule
    Behavior = WeaponBonusUpgrade ModuleTag_05
      TriggeredBy = Upgrade_GLAAPBullets
    End
  End
End

; -----------------------------------------------------------------------------
; Pilots no longer take a passengers seat instead of promoting Humvees
; -----------------------------------------------------------------------------

Object AmericaVehicleHumvee
  RemoveModule ModuleTag_05
  AddModule
    Behavior = TransportContain ModuleTag_05
      PassengersAllowedToFire = Yes
      Slots = 5
      ;EnterSound = GarrisonEnter
      ;ExitSound = GarrisonExit
      DamagePercentToUnits = 100% ;10%
      AllowInsideKindOf = INFANTRY
      ForbidInsideKindOf = NO_GARRISON
      ExitDelay = 250
      NumberOfExitPaths = 3 ; Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
      GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    End
  End
End

Object SupW_AmericaVehicleHumvee
  RemoveModule ModuleTag_05
  AddModule
    Behavior = TransportContain ModuleTag_05
      PassengersAllowedToFire = Yes
      Slots = 5
      ;EnterSound = GarrisonEnter
      ;ExitSound = GarrisonExit
      DamagePercentToUnits = 100% ;10%
      AllowInsideKindOf = INFANTRY
      ForbidInsideKindOf = NO_GARRISON
      ExitDelay = 250
      NumberOfExitPaths = 3 ; Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
      GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    End
  End
End

Object Lazr_AmericaVehicleHumvee
  RemoveModule ModuleTag_05
  AddModule
    Behavior = TransportContain ModuleTag_05
      PassengersAllowedToFire = Yes
      Slots = 5
      ;EnterSound = GarrisonEnter
      ;ExitSound = GarrisonExit
      DamagePercentToUnits = 100% ;10%
      AllowInsideKindOf = INFANTRY
      ForbidInsideKindOf = NO_GARRISON
      ExitDelay = 250
      NumberOfExitPaths = 3 ; Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
      GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    End
  End
End

Object AirF_AmericaVehicleHumvee
  RemoveModule ModuleTag_05
  AddModule
    Behavior = TransportContain ModuleTag_05
      PassengersAllowedToFire = Yes
      Slots = 5
      ;EnterSound = GarrisonEnter
      ;ExitSound = GarrisonExit
      DamagePercentToUnits = 100% ;10%
      AllowInsideKindOf = INFANTRY
      ForbidInsideKindOf = NO_GARRISON
      ExitDelay = 250
      NumberOfExitPaths = 3 ; Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
      GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    End
  End
End
