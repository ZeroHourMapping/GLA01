; -----------------------------------------------------------------------------
; Snow
; -----------------------------------------------------------------------------

Weather
  SnowEnabled = yes ; enable/disable snow on the map.
  SnowTexture = ExSnowFlake1.tga ;texture used for each snow particle.
  SnowBoxDimensions = 300 ; width/height of box around camera containing snow.
  SnowBoxDensity = 1 ; amount of snow particles per world-unit. Raise to increase particle count.
  SnowFrequencyScaleX = 0.0533 ;speed of side-to-side wave movement.
  SnowFrequencyScaleY = 0.0275 ;speed of side-to-side wave movement. 
  SnowAmplitude = 2.0 ;amount of side-to-side movement. 
  SnowVelocity = 1.0 ;speed at which snow falls
  SnowPointSize = .16 ;scale the size of snow particles.
  SnowMaxPointSize = 10.0 ; maximum pixel size of point sprite particles (min-spec requires <= 64).
  SnowMinPointSize = 0.0 ; minimum pixel size of point sprite particles.

  ;Some video cards can't do hardware accelerated particles.  Set this
  ;setting to "no" in order see what emulation will look like.  Use the
  ;SnowQuadSize setting to make it look similar to PointSprite version.

  SnowPointSprites = yes ;set to "no" for point-sprite emulation.
  SnowQuadSize = 0.5 ;scale the size of snow particles when using point-sprite emulation.
End

; -----------------------------------------------------------------------------
; Water
; -----------------------------------------------------------------------------

WaterTransparency
  TransparentWaterMinOpacity = 1.0 ; opacity of water at maximum depth - 1.0 is opaque, 0 transparent.
  TransparentWaterDepth = 3.0 ; depth below water surface at which it becomes opaque (unless clipped by TransparentWaterMinOpacity)
  StandingWaterColor = R:85 G:85 B:85 ; material color used to tint the water surface.
  StandingWaterTexture = TWWater01.tga ; main texture used for water (usually something blue that looks like water).
  AdditiveBlending = no ; use additive blending instead of alpha blending?
  RadarWaterColor = R:140 G:140 B:255 ; color of water on radar display.

; -----------------------------------------------------------------------------
; Skybox
; -----------------------------------------------------------------------------
  SkyboxTextureN = cine_biakclouds.tga
  SkyboxTextureE = cine_biakclouds.tga
  SkyboxTextureS = cine_biakclouds.tga
  SkyboxTextureW = cine_biakclouds.tga
  SkyboxTextureT = cine_biakclouds.tga

End

; -----------------------------------------------------------------------------
; Waterfalls
;
; From: https://www.youtube.com/watch?v=ACbklVPfYRk
; Author: AGX750
; -----------------------------------------------------------------------------

Object ParticleTestObject
 ReplaceModule ModuleTag_01
  Draw                = W3DModelDraw ModuleTag_01_Override
    ConditionState    = NONE ;100%
      Model           = NONE
      ParticleSysBone = WaterSpray01 WaterSpray
      ParticleSysBone = WaterSpray02 WaterSpray
      ParticleSysBone = WaterSpray03 WaterSpray
    End
    ConditionState    = DAMAGED ;50%
      Model           = NONE
      ParticleSysBone = Spray04 DamOverflow
      ParticleSysBone = Spray07 DamOverflow
      ParticleSysBone = Spray08 DamOverflow
      ParticleSysBone = WaterSpray01 WaterSpraySplash
      ParticleSysBone = WaterSpray02 WaterSpraySplash
      ParticleSysBone = WaterSpray03 WaterSpraySplash
    End
    ConditionState    = REALLYDAMAGED ;25%
      Model           = NONE
      ParticleSysBone = WATERSPOUT DrainPipeWater1
    End
    ConditionState    = RUBBLE ;Dead
      Model           = NONE
      ParticleSysBone = WaterSpray01 DamMist
    End
  End
 End

  ; *** ENGINEERING Parameters ***  
  KindOf            = IMMOBILE

 ReplaceModule ModuleTag_02
  Body              = ActiveBody ModuleTag_02_Override
    MaxHealth       = 99999999.0
    InitialHealth   = 99999999.0
  End
 End
  ArmorSet
    Conditions      = None
    Armor           = InvulnerableArmor
    DamageFX        = EmptyDamageFX
  End
  RemoveModule ModuleTag_03

  ; *** AUDIO Parameters ***
  SoundAmbient = DamDamageLoop3
  SoundAmbientDamaged = Amb_WaterRiverLoop
  SoundAmbientReallyDamaged = Amb_WaterStreamLoop
  SoundAmbientRubble = DamDamageLoop2
End

; -----------------------------------------------------------------------------
; Pretty Aurora Bombs
;
; From: https://www.youtube.com/watch?v=oRd6akDSUh0
; Author: AGX750
; -----------------------------------------------------------------------------

Object AuroraBomb
 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override
    DefaultConditionState
      Model = ExMsslTm
    End
  End
 End
 Scale = 0.90
End

Object SupW_AuroraFuelAirBomb
 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override
    DefaultConditionState
      Model = ExMsslTm
    End
  End
 End
 Scale = 1.10
End

; -----------------------------------------------------------------------------
; Remove Tutorials
; -----------------------------------------------------------------------------

Object TechArtilleryPlatform
DisplayName = OBJECT:FireBase ;TOOLTIP:TechBuilding
End

Object TechHospital
DisplayName = TOOLTIP:TechBuilding
End

Object TechOilDerrick
DisplayName = TOOLTIP:TechBuilding
End

Object TechOilRefinery
DisplayName = OBJECT:OilRefinery ;TOOLTIP:TechBuilding
End

Object TechReinforcementPad
DisplayName = TOOLTIP:TechBuilding
End

Object TechRepairbay
DisplayName = TOOLTIP:TechBuilding
End

Object TechRepairPad
DisplayName = TOOLTIP:TechBuilding
End

; -----------------------------------------------------------------------------
; Supply Centers build Supply Trucks
; -----------------------------------------------------------------------------

Object Boss_VehicleSupplyTruck
  Prerequisites
    Object = AmericaSupplyCenter AirF_AmericaSupplyCenter Lazr_AmericaSupplyCenter SupW_AmericaSupplyCenter
  End
End

CommandSet New_AmericaSupplyCenterCommandSet
  1 = Boss_Command_ConstructChinaVehicleSupplyTruck
 13 = Command_SetRallyPoint
 14 = Command_Sell  
End

Object AmericaSupplyCenter
  CommandSet = New_AmericaSupplyCenterCommandSet

  ReplaceModule ModuleTag_12
    Behavior = SpawnBehavior ModuleTag_12_Override
      SpawnNumber = 1
      SpawnReplaceDelay = 9999
      SpawnTemplateName = Boss_VehicleSupplyTruck
      OneShot = Yes
      CanReclaimOrphans = No
      SlavesHaveFreeWill = Yes
    End
  End

  ReplaceModule ModuleTag_13
    Behavior = SupplyCenterDockUpdate ModuleTag_13_Override
      AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
      NumberApproachPositions = 9 ; This is a Boneless dock, so this means infinite can approach
    End
  End
End

Object AirF_AmericaSupplyCenter
  CommandSet = New_AmericaSupplyCenterCommandSet

  ReplaceModule ModuleTag_12
    Behavior = SpawnBehavior ModuleTag_12_Override
      SpawnNumber = 1
      SpawnReplaceDelay = 9999
      SpawnTemplateName = Boss_VehicleSupplyTruck
      OneShot = Yes
      CanReclaimOrphans = No
      SlavesHaveFreeWill = Yes
    End
  End

  ReplaceModule ModuleTag_13
    Behavior = SupplyCenterDockUpdate ModuleTag_13_Override
      AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
      NumberApproachPositions = 9 ; This is a Boneless dock, so this means infinite can approach
    End
  End
End

Object Lazr_AmericaSupplyCenter
  CommandSet = New_AmericaSupplyCenterCommandSet

  ReplaceModule ModuleTag_12
    Behavior = SpawnBehavior ModuleTag_12_Override
      SpawnNumber = 1
      SpawnReplaceDelay = 9999
      SpawnTemplateName = Boss_VehicleSupplyTruck
      OneShot = Yes
      CanReclaimOrphans = No
      SlavesHaveFreeWill = Yes
    End
  End

  ReplaceModule ModuleTag_13
    Behavior = SupplyCenterDockUpdate ModuleTag_13_Override
      AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
      NumberApproachPositions = 9 ; This is a Boneless dock, so this means infinite can approach
    End
  End
End



Object SupW_AmericaSupplyCenter
  CommandSet = New_AmericaSupplyCenterCommandSet

  ReplaceModule ModuleTag_12
    Behavior = SpawnBehavior ModuleTag_12_Override
      SpawnNumber = 1
      SpawnReplaceDelay = 9999
      SpawnTemplateName = Boss_VehicleSupplyTruck
      OneShot = Yes
      CanReclaimOrphans = No
      SlavesHaveFreeWill = Yes
    End
  End

  ReplaceModule ModuleTag_13
    Behavior = SupplyCenterDockUpdate ModuleTag_13_Override
      AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
      NumberApproachPositions = 9 ; This is a Boneless dock, so this means infinite can approach
    End
  End
End

; -----------------------------------------------------------------------------
; Civilian Dozer
; -----------------------------------------------------------------------------

CommandSet New_DozerCommandSet
  14 = Command_DisarmMinesAtPosition
End

Object Boss_VehicleDozer

  CommandSet = New_DozerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = DozerUSAVoiceSelect
  VoiceMove           = DozerUSAVoiceMove
  VoiceEnter          = DozerUSAVoiceMove
  VoiceGuard          = DozerUSAVoiceMove
  VoiceTaskComplete   = NoSound
  SoundMoveStart      = DozerUSAMoveStart
  SoundMoveStartDamaged = DozerUSAMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate           = DozerUSAVoiceCreate
    VoiceNoBuild          = DozerUSAVoiceBuildNot
    VoiceCrush            = DozerUSAVoiceCrush
    VoiceRepair           = DozerUSAVoiceRepair
    VoiceDisarm           = DozerUSAVoiceClearMine
    TruckLandingSound     = NoSound
    TruckPowerslideSound  = NoSound
    VoiceEnter            = DozerUSAVoiceMove
    VoiceBuildResponse    = DozerUSAVoiceBuild
  End

  Prerequisites
    Object = GC_Chem_GLAArmsDealer
  End

End

; -----------------------------------------------------------------------------
; Militia Tank
; -----------------------------------------------------------------------------

Object MilitiaTank

  ; *** ART Parameters ***
  SelectPortrait         = SSTankDrop
  ButtonImage            = SSTankDrop

  ; *** AUDIO Parameters ***
  VoiceSelect = TechnicalVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceAttack = ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = ScorpionTankVoiceMove

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = NoSound
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = ScorpionTankVoiceMove
  End

  Prerequisites
    Object = GC_Chem_GLAArmsDealer
  End

End

; -----------------------------------------------------------------------------
; Build Civil Vehicles
; -----------------------------------------------------------------------------

CommandButton GC_Chem_Command_ConstructGLATankScorpion
  Command       = UNIT_BUILD
  Object        = MilitiaTank
  TextLabel     = OBJECT:MilitiaTank
  ButtonImage   = SSTankDrop
  ButtonBorderType        = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel           = CONTROLBAR:ToolTipGLABuildScorpion
End

CommandButton Boss_Command_ConstructChinaDozer
  Command       = UNIT_BUILD
  Object        = Boss_VehicleDozer
  TextLabel     = CONTROLBAR:ConstructAmericaDozer
  ButtonImage   = SACDozer
  ButtonBorderType        = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel           = Repairs_buildings_but_cannot_construct_any_new_ones
End

CommandSet New_GLAArmsDealerCommandSet
  1  = GC_Chem_Command_ConstructGLATankScorpion
  3  = Boss_Command_ConstructChinaDozer
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object GC_Chem_GLAArmsDealer

  CommandSet = New_GLAArmsDealerCommandSet

End

; -----------------------------------------------------------------------------
; Reinforcement Pads drop Militia Tanks
;
; From: http://www.cnclabs.com/forums/cnc_postst9645_editing-output-of-reinforcement-pads.aspx
; Author: Annihilationzh
; -----------------------------------------------------------------------------

ObjectCreationList OCL_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_SWGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_LGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_AFGen_ReinforcementPadUSAVehicle
  DeliverPayload
    Transport = AmericaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_InfGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_TnkGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_NukeGen_ReinforcementPadCHIVehicle
  DeliverPayload
    Transport = ChinaJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_ToxGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_DemoGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 2
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

ObjectCreationList OCL_StlthGen_ReinforcementPadGLAVehicle
  DeliverPayload
    Transport = GLAJetCargoPlane
    StartAtPreferredHeight = Yes
    StartAtMaxSpeed = Yes
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-5
    DropDelay = 400
    PutInContainer = LargeParachute
    Payload = MilitiaTank 1
    ParachuteDirectly = Yes ; will tell all contained parachutes to go ahead and bunch
    ; up on the target instead of parachuting to the spot below their drop point.
    DeliveryDistance = 250
  End
End

; -----------------------------------------------------------------------------
; Snowman Disguise
;
; From: "Attack of the Mutant Snowmen"
; Author: Beng
; -----------------------------------------------------------------------------

Object CINE_GLAInfantryRebel

  ; *** ART Parameters ***
  SelectPortrait         = SURebel_L
  ButtonImage            = SURebel

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo2 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo3 = Upgrade_GLACamouflage

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Rebel
  Side                = GLA
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)

 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override

    OkToChangeModelColor = Yes

    ; this says "we don't use these condition states at all, so completely
    ; ignore them for purposes of matchmaking"... this is useful to help
    ; reduce the number of AliasConditionState clauses you must add in
    ; order to avoid ambiguity in some cases.
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; ---- standing
    DefaultConditionState
      Model               = PMSnowman ;UIRGrd_SKN
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STN 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDA 
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDB 
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY CYLINDER02
      WeaponLaunchBone    = PRIMARY CYLINDER02
      TransitionKey       = TRANS_Standing
    End

    ConditionState        = REALLYDAMAGED
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STB 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDC
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDD 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandingHurt
    End

    ; ---- moving
    ConditionState        = MOVING
      Animation           = UIRGrd_SKL.UIRGrd_RNA 15
      AnimationMode       = LOOP
      TransitionKey       = TRANS_Walking
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING

    ConditionState        = MOVING REALLYDAMAGED
      Animation           = UIRGrd_SKL.UIRGrd_RNB 25
      AnimationMode       = LOOP
      TransitionKey       = TRANS_WalkingHurt
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING REALLYDAMAGED

    ; ---- dying 
    ConditionState        = DYING
      Animation           = UIRGrd_SKL.UIRGrd_DTA 
      Animation           = UIRGrd_SKL.UIRGrd_DTB 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIRGrd_SKL.UIRGrd_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIRGrd_SKL.UIRGrd_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIRGrd_SKL.UIRGrd_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UIRGrd_SKL.UIRGrd_IDB
    End

    ; ---- firing
    ConditionState = USING_WEAPON_A
      Animation = UIRGrd_SKL.UIRGrd_ATA
      AnimationMode = LOOP
      TransitionKey = TRANS_Firing
    End

    ConditionState = USING_WEAPON_A REALLYDAMAGED
      Animation = UIRGrd_SKL.UIRGrd_ATA2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringHurt
    End

    TransitionState = TRANS_Standing TRANS_Firing
      Animation = UIRGrd_SKL.UIRGrd_ATAST
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Standing
      Animation = UIRGrd_SKL.UIRGrd_ATAED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_StandingHurt TRANS_FiringHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE_BACKWARDS
    End

    TransitionState = TRANS_FiringHurt TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Standing TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    ; ------- Bldg-capture

    ConditionState = UNPACKING
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

  End
 End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GC_Chem_GLARebelGunBeta
  End

 ReplaceModule ModuleTag_03
  Behavior = AIUpdateInterface ModuleTag_03_Override
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate      = 90
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
 End
  Locomotor = SET_NORMAL WanderHumanLocomotor

 ReplaceModule ModuleTag_Death04
  Behavior = SlowDeathBehavior ModuleTag_Death04_Override
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 5000
    SinkDelay           = 0
    SinkRate            = 5.0  ; in Dist/Sec, height of head is 20, of hat is 25
    FX                  = INITIAL FX_ToxinTractorDie ;FX_DieByFireGLA
    OCL                 = INITIAL OCL_PoisonFieldUpgradedSmall
  End
 End

  Prerequisites
    Object = GC_Chem_GLABarracks
  End

End

; -----------------------------------------------------------------------------
; Build Snowman Disguise
; -----------------------------------------------------------------------------

Object GC_Chem_GLAInfantryRebel

  DisplayName = OBJECT:Chem_Rebel

  Prerequisites
    Object = GC_Chem_GLABarracks
  End

End

Object GC_Chem_GLAInfantryTunnelDefender

  DisplayName = OBJECT:TunnelDefender

  Prerequisites
    Object = GC_Chem_GLABarracks
  End

End

CommandButton GC_Slth_Command_ConstructGLAInfantryRebel
  Command       = UNIT_BUILD
  Object        = CINE_GLAInfantryRebel
  TextLabel     = Snowman_Disguise
  ButtonImage   = SURebel
  ButtonBorderType        = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel           = CONTROLBAR:ToolTipGLABuildRebel
End

CommandSet New_GLABarracksCommandSet
  1  = GC_Slth_Command_ConstructGLAInfantryRebel ; Snowman Disguise
  2  = GC_Chem_Command_ConstructGLAInfantryRebel ; Toxin Rebel
  4  = GC_Chem_Command_ConstructGLAInfantryRPGTrooper ; Toxin Trooper
  13 = Command_SetRallyPoint
  14 = Command_Sell
End

Object GC_Chem_GLABarracks

  CommandSet = New_GLABarracksCommandSet

End

; -----------------------------------------------------------------------------
; Jump Jet Infantry
;
; From: "JumpJetInfantry"
; Author: Beng
; -----------------------------------------------------------------------------

;for walking on ground, use a hover loco also so it lands slowly after coming off water or cliffs
Locomotor CINE_HazMatHumanLocomotor
  Surfaces        = GROUND RUBBLE
  Speed           = 25
  SpeedDamaged    = 15
  MinSpeed        = 0
  TurnRate        = 500
  TurnRateDamaged = 500
  Acceleration    = 100
  AccelerationDamaged = 50
  Lift            = 120
  LiftDamaged     = 80
  Braking         = 100
  MinTurnSpeed    = 0
  PreferredHeight = -1
  SpeedLimitZ     = 60  ;max speed we want to try to fall
  AllowAirborneMotiveForce = Yes
  ZAxisBehavior   = SURFACE_RELATIVE_HEIGHT
  Appearance      = HOVER

  StickToGround = No ;must say "No" to override the existing field in CINE_HazMatHumanLocomotor

  PreferredHeightDamping = 0.8  ; so that we gradually adjust our height

  PitchInDirectionOfZVelFactor = 0   ;  how much to pitch according to our z-vel. 0=none, 1=lots (0=default)
  PitchStiffness  = 1.0
  RollStiffness   = 0.95                ;  stiffness of the "springs" in the suspension side to side.
  PitchDamping    = 0.9                 ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  RollDamping     = 0.9                 ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  ForwardVelocityPitchFactor  = -0.05   ;  How much velocity will cause the front to lift/dip
  LateralVelocityRollFactor   = 0.1     ;  How much cornering will cause the chassis to roll.
  Apply2DFrictionWhenAirborne = Yes
  AirborneTargetingHeight     = 30
  LocomotorWorksWhenDead = No
  GroupMovementPriority = MOVES_FRONT
End

; unused in game, now used for jump jets
Locomotor AuroraJetMissileLocomotor
  Surfaces = WATER CLIFF
  Speed           = 90
  SpeedDamaged    = 50
  MinSpeed        = 60
  TurnRate        = 20
  TurnRateDamaged = 10
  Acceleration    = 500
  AccelerationDamaged = 400
  Lift            = 120
  LiftDamaged     = 80
  Braking         = 20
  MinTurnSpeed    = 50
  PreferredHeight = 70
  AllowAirborneMotiveForce = Yes
  ZAxisBehavior   = RELATIVE_TO_HIGHEST_LAYER
  Appearance      = HOVER

  PitchInDirectionOfZVelFactor = 1.0    ;  how much to pitch according to our z-vel. 0=none, 1=lots (0=default)
  PitchStiffness  = 0.5                 ;  stiffness of the "springs" in the suspension forward & back.
  RollStiffness   = 0.1                 ;  stiffness of the "springs" in the suspension side to side.
  PitchDamping    = 0.9                 ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  RollDamping     = 0.9                 ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  ForwardVelocityPitchFactor  = -0.05   ;  How much velocity will cause the front to lift/dip
  LateralVelocityRollFactor   = 0.1     ;  How much cornering will cause the chassis to roll.
  Apply2DFrictionWhenAirborne = Yes
  AirborneTargetingHeight     = 75
  LocomotorWorksWhenDead = No
  GroupMovementPriority = MOVES_FRONT
End

Object Boss_InfantryRanger

  DisplayName         = OBJECT:Ranger

 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override

    OkToChangeModelColor = Yes
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; --- Idle
    DefaultConditionState
      Model             = AIRngr_SKN
      IdleAnimation     = AIRngr_SKL.AIRngr_STA 0 35
      IdleAnimation     = AIRngr_SKL.AIRngr_IDA
      IdleAnimation     = AIRngr_SKL.AIRngr_IDB
      AnimationMode     = ONCE
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = AIRngr_SKL.AIRngr_STB 0 35
      IdleAnimation     = AIRngr_SKL.AIRngr_IDC
      IdleAnimation     = AIRngr_SKL.AIRngr_IDD
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_SA2SB
      AnimationMode     = ONCE
    End

    ;--------------- Flying -----------------

    ConditionState      = MOVING OVER_WATER
      Animation         = AIRngr_SKL.AIRngr_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Fly
      ParticleSysBone   = "AIRNGR R FOOT" MissileDefenderMissileExhaust  ;"DUM - MVR"
    End
    AliasConditionState = MOVING CLIMBING ;over cliffs
    AliasConditionState = MOVING OVER_WATER REALLYDAMAGED
    AliasConditionState = MOVING CLIMBING REALLYDAMAGED

    ConditionState      = OVER_WATER
      Animation         = AIRngr_SKL.AIRngr_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME
      TransitionKey     = TRANS_FlyStand
      ParticleSysBone   = "AIRNGR R FOOT" MissileDefenderMissileExhaust
    End
    AliasConditionState = CLIMBING
    AliasConditionState = OVER_WATER REALLYDAMAGED
    AliasConditionState = CLIMBING REALLYDAMAGED

    TransitionState     = TRANS_Fly TRANS_FlyStand
      Animation         = AIRngr_SKL.AIRngr_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME
      ParticleSysBone   = "AIRNGR R FOOT"  MissileDefenderMissileExhaust
    End

    TransitionState     = TRANS_FlyStand TRANS_Fly
      Animation         = AIRngr_SKL.AIRngr_POP
      AnimationMode     = ONCE_BACKWARDS
      ParticleSysBone   = "AIRNGR R FOOT"  MissileDefenderMissileExhaust
    End

    TransitionState     = TRANS_Fly TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Fly TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End

    ; --- attacking (Machine Gun) -----------
    ConditionState      = USING_WEAPON_A
      Animation         = AIRngr_SKL.AIRngr_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringA
    End
    AliasConditionState = USING_WEAPON_A OVER_WATER
    AliasConditionState = USING_WEAPON_A CLIMBING

    ConditionState      = USING_WEAPON_A REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringAInjured
    End
    AliasConditionState = USING_WEAPON_A OVER_WATER REALLYDAMAGED
    AliasConditionState = USING_WEAPON_A CLIMBING REALLYDAMAGED

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = AIRngr_SKL.AIRngr_A2WAA
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Stand TRANS_FiringA
      Animation         = AIRngr_SKL.AIRngr_ATAST
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringA TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_ATAED
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_StandInjured TRANS_FiringAInjured
      Animation         = AIRngr_SKL.AIRngr_S2WAA
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringAInjured TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_WAA2S
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_Stand TRANS_Move
      Animation         = AIRngr_SKL.AIRngr_STA2RNA
      AnimationMode     = ONCE
    End

    ; --- attacking (Grenade Launcher)
    ConditionState      = PREATTACK_B 
      Animation         = AIRngr_SKL.AIRngr_ATBA
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringB
    End
    AliasConditionState = PREATTACK_B MOVING
    AliasConditionState = PREATTACK_B FIRING_B
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B

    ConditionState      = FIRING_B
      Animation         = AIRngr_SKL.AIRngr_ATBB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringB
    End
    AliasConditionState = FIRING_B OVER_WATER
    AliasConditionState = FIRING_B CLIMBING

    ConditionState      = BETWEEN_FIRING_SHOTS_B
      Animation         = AIRngr_SKL.AIRngr_ATBB
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_FiringB
      WaitForStateToFinishIfPossible = TRANS_FiringB
    End
    AliasConditionState = RELOADING_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_B OVER_WATER
    AliasConditionState = BETWEEN_FIRING_SHOTS_B CLIMBING
    AliasConditionState = RELOADING_B OVER_WATER
    AliasConditionState = RELOADING_B CLIMBING

    TransitionState     = TRANS_Stand TRANS_FiringB
      Animation         = AIRngr_SKL.AIRngr_ATBST1
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_FiringB TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_ATBST2
      AnimationMode     = ONCE
    End

    ConditionState      = PREATTACK_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2A
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringBInjured
    End
    AliasConditionState = PREATTACK_B MOVING REALLYDAMAGED
    AliasConditionState = PREATTACK_B FIRING_B REALLYDAMAGED
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

    ConditionState      = FIRING_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2B
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringBInjured
    End
    AliasConditionState = FIRING_B OVER_WATER REALLYDAMAGED
    AliasConditionState = FIRING_B CLIMBING REALLYDAMAGED

    ConditionState      = BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_ATB2B
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_FiringBInjured
      WaitForStateToFinishIfPossible = TRANS_FiringBInjured
    End
    AliasConditionState = RELOADING_B REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_B OVER_WATER REALLYDAMAGED
    AliasConditionState = BETWEEN_FIRING_SHOTS_B CLIMBING REALLYDAMAGED
    AliasConditionState = RELOADING_B OVER_WATER REALLYDAMAGED
    AliasConditionState = RELOADING_B CLIMBING REALLYDAMAGED

    TransitionState     = TRANS_StandInjured TRANS_FiringBInjured
      Animation         = AIRngr_SKL.AIRngr_ATB2ST1
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_FiringBInjured TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_ATB2ST2
      AnimationMode     = ONCE
    End

    ; -- cross-attack transitions

    TransitionState     = TRANS_FiringA TRANS_FiringB
      Animation         = AIRngr_SKL.AIRngr_ATA2AB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 4 4
    End

    TransitionState     = TRANS_FiringB TRANS_FiringA
      Animation         = AIRngr_SKL.AIRngr_ATA2AB
      AnimationMode     = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 4
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = AIRngr_SKL.AIRngr_RNA 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Move
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_RNB 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Move
    End
    AliasConditionState = MOVING REALLYDAMAGED ATTACKING

    ; --- dying anims
    ConditionState      = DYING
      Animation         = AIRngr_SKL.AIRngr_DTA
      Animation         = AIRngr_SKL.AIRngr_DTB
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = AIRngr_SKL.AIRngr_ADTF1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = AIRngr_SKL.AIRngr_ADTF2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = AIRngr_SKL.AIRngr_ADTF3
      AnimationMode     = ONCE
      TransitionKey     = None
    End
    AliasConditionState = DYING SPLATTED

    ; --- cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = AIRngr_SKL.AIRngr_CHA
      AnimationMode     = LOOP
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = AIRngr_SKL.AIRngr_CHB
      AnimationMode     = LOOP
    End

    ; ----- PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = AIRngr_SKL.AIRngr_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = AIRngr_SKL.AIRngr_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = AIRngr_SKL.AIRngr_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End
    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_PTD
      AnimationMode     = ONCE
    End

    ; ------- Bldg-capture

    ConditionState      = UNPACKING
      Model             = AIRngr_F_SKN
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState      = RAISING_FLAG
      Model             = AIRngr_F_SKN
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState      = PACKING
      Model             = AIRngr_F_SKN
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState     = TRANS_Raising TRANS_Packing
      Model             = AIRngr_F_SKN
      Animation         = AIRngr_F_SKL.AIRngr_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

    ; --- RAPPELLING ANIMATIONS
    ConditionState      = RAPPELLING
      Animation         = AIRngr_SKL.AIRngr_RPL1 ;30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_Rappelling
    End
    AliasConditionState = MOVING RAPPELLING

    TransitionState     = TRANS_Rappelling TRANS_Stand
      Animation         = AIRngr_SKL.AIRngr_RPL2
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Rappelling TRANS_StandInjured
      Animation         = AIRngr_SKL.AIRngr_RPL2
      AnimationMode     = ONCE
    End

  End
 End

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY CAN_RAPPEL SCORE CLIFF_JUMPER

  Locomotor = SET_NORMAL CINE_HazMatHumanLocomotor AuroraJetMissileLocomotor

 ReplaceModule ModuleTag_07
  Behavior = PhysicsBehavior ModuleTag_07_Override
    Mass = 1.0
    FallHeightDamageFactor = 0
  End
 End

End

Object Boss_InfantryTankHunter

  ; *** ART Parameters ***
  SelectPortrait         = SAMissleDefender_L
  ButtonImage            = SAMissleDefender

  UpgradeCameo1 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo2 = Upgrade_AmericaChemicalSuits
  UpgradeCameo3 = NONE
  UpgradeCameo4 = NONE
  UpgradeCameo5 = NONE

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MissileTeam
  Side                = America
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    MissileDefenderMissileWeapon 
    Weapon = SECONDARY  MissileDefenderLaserGuidedMissileWeapon ;Controlled by special ability
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    AutoChooseSources = SECONDARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = ChemSuitHumanArmor
    DamageFX        = InfantryDamageFX
  End

  VisionRange = 150
  ShroudClearingRange = 400
  Prerequisites
    Object = Boss_Barracks
  End
  BuildCost = 300
  BuildTime = 5.0          ;in seconds  

  ExperienceValue = 20 20 40 60    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel      = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = AmericaInfantryMissileDefenderCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = MissileDefenderVoiceSelect
  VoiceMove = MissileDefenderVoiceMove
  VoiceAttack = MissileDefenderVoiceAttack
  VoiceAttackAir = MissileDefenderVoiceAttack
  VoiceGuard = MissileDefenderVoiceMove
  VoiceFear = MissileDefenderVoiceFear

  UnitSpecificSounds
    VoiceCreate = MissileDefenderVoiceCreate
    VoiceGarrison = MissileDefenderVoiceGarrison
    VoiceEnter = MissileDefenderVoiceMove
    VoiceEnterHostile = MissileDefenderVoiceMove
    VoiceGetHealed = MissileDefenderVoiceMove
  End

 ReplaceModule ModuleTag_01
  Draw = W3DModelDraw ModuleTag_01_Override

    IgnoreConditionStates = REALLYDAMAGED

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model             = NITHNT_SKN
      IdleAnimation     = NITHNT_SKL.NITHNT_STA 0 30
      IdleAnimation     = NITHNT_SKL.NITHNT_IDA
      IdleAnimation     = NITHNT_SKL.NITHNT_IDB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 0.8 1.2
      TransitionKey     = TRANS_Stand
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle

    End

    ;------------ Flying ------------

    ConditionState      = MOVING OVER_WATER
      Animation         = NITHNT_SKL.NITHNT_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Fly
      ParticleSysBone   = "NITHNT R TOE0" MissileDefenderMissileExhaust ;NITHNT R FOOT ; NITHNT R TOE0 NITHNT_MAINROOT
    End
    AliasConditionState = MOVING CLIMBING ;over cliffs

    ConditionState      = OVER_WATER
      Animation         = NITHNT_SKL.NITHNT_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_FlyStand
      ParticleSysBone   = "NITHNT R TOE0" MissileDefenderMissileExhaust
    End
    AliasConditionState = CLIMBING

    TransitionState     = TRANS_Fly TRANS_FlyStand
      Animation         = NITHNT_SKL.NITHNT_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      ParticleSysBone   = "NITHNT R TOE0" MissileDefenderMissileExhaust
    End

    TransitionState     = TRANS_FlyStand TRANS_Fly
      Animation         = NITHNT_SKL.NITHNT_POP
      AnimationMode     = ONCE_BACKWARDS
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      ParticleSysBone   = "NITHNT R TOE0" MissileDefenderMissileExhaust
    End

    TransitionState     = TRANS_Fly TRANS_Stand
      Animation         = NITHNT_SKL.NITHNT_PTD
      AnimationMode     = ONCE
    End

   ;----------------------------------

    ConditionState      = FIRING_A 
      Animation         = NITHNT_SKL.NITHNT_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_START_FIRING
    End
    AliasConditionState = FIRING_A OVER_WATER
    AliasConditionState = FIRING_A CLIMBING

    AliasConditionState = FIRING_B
    AliasConditionState = FIRING_B OVER_WATER
    AliasConditionState = FIRING_B CLIMBING

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = NITHNT_SKL.NITHNT_STA
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A OVER_WATER
    AliasConditionState = BETWEEN_FIRING_SHOTS_A CLIMBING

    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = BETWEEN_FIRING_SHOTS_B OVER_WATER
    AliasConditionState = BETWEEN_FIRING_SHOTS_B CLIMBING

    ConditionState      = MOVING
      Animation         = NITHNT_SKL.NITHNT_RNA 20
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState      = RELOADING_A
      Animation         = NITHNT_SKL.NITHNT_ATA 10
      AnimationMode     = ONCE
      ;WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = RELOADING_A OVER_WATER
    AliasConditionState = RELOADING_A CLIMBING
    AliasConditionState = MOVING RELOADING_A OVER_WATER
    AliasConditionState = MOVING RELOADING_A CLIMBING

    AliasConditionState = RELOADING_B
    AliasConditionState = MOVING RELOADING_B
    AliasConditionState = RELOADING_B OVER_WATER
    AliasConditionState = RELOADING_B CLIMBING
    AliasConditionState = MOVING RELOADING_B OVER_WATER
    AliasConditionState = MOVING RELOADING_B CLIMBING

    ConditionState      = DYING
      Animation         = NITHNT_SKL.NITHNT_DTA
      Animation         = NITHNT_SKL.NITHNT_DTB
      AnimationSpeedFactorRange = 0.9 1.25
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NITHNT_SKL.NITHNT_ADTA1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NITHNT_SKL.NITHNT_ADTA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NITHNT_SKL.NITHNT_ADTA3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ;PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = NITHNT_SKL.NITHNT_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NITHNT_SKL.NITHNT_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NITHNT_SKL.NITHNT_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NITHNT_SKL.NITHNT_PTD
      AnimationMode     = ONCE
    End

  End
 End

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE CLIFF_JUMPER

  Locomotor = SET_NORMAL CINE_HazMatHumanLocomotor AuroraJetMissileLocomotor

 ReplaceModule ModuleTag_05
  Behavior = PhysicsBehavior ModuleTag_05_Override
    Mass = 1.0
    FallHeightDamageFactor = 0
  End
 End

End

; -----------------------------------------------------------------------------
; Build Jump Jet Infantry
; -----------------------------------------------------------------------------

CommandButton Boss_Command_ConstructAmericaInfantryRanger
  Command       = UNIT_BUILD
  Object        = Boss_InfantryRanger
  TextLabel     = Jump_Jet_Ranger
  ButtonImage   = SARanger
  ButtonBorderType        = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel           = CONTROLBAR:ToolTipUSABuildRanger
End

CommandButton Boss_Command_ConstructChinaInfantryTankHunter
  Command       = UNIT_BUILD
  Object        = Boss_InfantryTankHunter
  TextLabel     = Jump_Jet_Missile_Defender
  ButtonImage   = SAMissleDefender
  ButtonBorderType        = BUILD ; Identifier for the User as to what kind of button this is
  DescriptLabel           = CONTROLBAR:ToolTipUSABuildMissileDefender
End

CommandSet New_BossBarracksCommandSet
  1 = Boss_Command_ConstructAmericaInfantryRanger ; Jump Jet Ranger
  3 = Boss_Command_ConstructChinaInfantryTankHunter ; Jump Jet Missile Defender
 13 = Command_SetRallyPoint
 14 = Command_Sell 
End

Object Boss_Barracks
  CommandSet = New_BossBarracksCommandSet
End
